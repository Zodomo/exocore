<!DOCTYPE html>
 <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/styles.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="keyword" content="">
  <meta name="title" content="Articles">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicon/site.webmanifest">

   <script src="/assets/js/jquery.min.js"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 <script src="/assets/js/sidenotes.js"></script>
 <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Articles | Exocore</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Articles" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A navigable, organised hypertext personal knowledge base" />
<meta property="og:description" content="A navigable, organised hypertext personal knowledge base" />
<link rel="canonical" href="https://exocore.netlify.app/pages/articles.html" />
<meta property="og:url" content="https://exocore.netlify.app/pages/articles.html" />
<meta property="og:site_name" content="Exocore" />
<meta property="og:image" content="https://exocore.netlify.app/assets/imgs/card.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2000-01-01T00:00:00-06:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://exocore.netlify.app/assets/imgs/card.png" />
<meta property="twitter:title" content="Articles" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-23T09:11:05-05:00","datePublished":"2000-01-01T00:00:00-06:00","description":"A navigable, organised hypertext personal knowledge base","headline":"Articles","image":"https://exocore.netlify.app/assets/imgs/card.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://exocore.netlify.app/pages/articles.html"},"url":"https://exocore.netlify.app/pages/articles.html"}</script>
<!-- End Jekyll SEO tag -->

 <script src="//unpkg.com/element-resize-detector/dist/element-resize-detector.min.js"></script><script src="//unpkg.com/force-graph"></script><script src="https://d3js.org/d3.v6.min.js"></script>
</head>  

<html lang="en-US">
  <body>
      <div class="container-lg">

    <div class="leftcolumn">
      <div class="sidebar-card profile">
    <div class="profile">
      <a href="/" | absolute_url }}">
      <img class="profile-pic" src="/assets/imgs/pfp.png" alt="">
      </a>
        <a class="silent-link" href="/" | absolute_url }}">
            <h1 class="user-name silent-link">Remilia Corporation</h1>
        </a>
</div>
  <div class="sidebar-link-box profile">
      <a href="/pages/articles">Articles</a>
      <a href="/pages/journal">Journal</a>
      <a href="/pages/all-wiki">Wiki</a>
      <a href="/pages/daily">Daily</a>
    </div>
      <div class="sidebar-link-box profile">
      <a href="/pages/latest">Latest Posts</a>
      <a href="/pages/archive">Archive</a>
      <a href="/pages/tags">Index</a>
      <a href="/pages/scrapbook">Scrapbook</a>
      <a href="/pages/library">Library</a>
      <a href="/ring">Webring</a>

    </div>
  </div>
    </div>
    
    
    

    <div class="midcolumn">
      <article>
        <h1 class="title-text">Latest Articles</h1>
        <p style=" width: 100%; text-align: center">Showing latest 9 of 9 articles</p>
        <p style=" width: 100%; text-align: center"><a href="/pages/all-articles/">View Index</a></p>
      </article>
<br>
      	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> May 26, 2025</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/eip-712-and-permit2-a-developer-s-guide">
        <div class="title">
        <h1 class="title-text">EIP-712 and Permit2: A Developer’s Guide</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <table> <tbody> <tr> <td> <strong>Author:</strong> Zodomo</td> <td><a href="https://x.com/0xZodomo" class="web-link">X</a></td> <td><a href="https://farcaster.xyz/zodomo" class="web-link">Warpcast</a></td> <td><a href="https://github.com/zodomo/" class="web-link">GitHub</a></td> <td><a href="https://exocore.milady.zip" class="web-link">Blog</a></td> </tr> </tbody> </table> <p><em>From zero to hero: Build gasless, secure token transfers with typed signatures</em></p> <p>I needed to utilize permit2’s witness functionality in Omni SolverNet to add gasless orders. Some of the data structures I had to use were extremely complex. When researching EIP-712 and permit2, I found that documentation for both was rather lacking. EIP-712 is easier to use on flat structs, and many projects use it on such. However, ERC-7683’s ResolvedCrossChainOrder struct (used in SolverNet) is quite complex, has nested struct arrays, and dynamic values such as byte arrays.</p> <p>I could find no good examples for how to properly build out my typehashes, let alone how to properly sign the orders in Solidity within Foundry tests. However, with the release of Claude 4, I was able to have it comprehensively teach me everything I needed to know about EIP-712 and permit2, especially its witness logic.</p> <p>So, I decided to take what I learned and produce a document to help guide new devs through fully learning how to use these tools, while understanding their importance. As I pretty much solely work in Foundry, I also walk through signing these structs in Solidity, in order to assist with testing such integrations. Throughout this document, I introduce these concepts through the scope of building an onchain bug bounty system.</p> <p>Other resources are available elsewhere to showcase how to produce these signatures offchain with software such as <a href="https://blog.emn178.cc/en/post/using-ethers-js-to-sign-eip-712-typed-structured-data/" class="web-link">ethers</a>, <a href="https://viem.sh/docs/actions/wallet/signTypedData.html" class="web-link">viem</a>, or <a href="https://wagmi.sh/core/api/actions/signTypedData" class="web-link">wagmi</a>.</p> <hr> <h2 id="table-of-contents">Table of Contents</h2> <ul> <li> <a href="#eip-712-and-permit2-a-developers-guide" class="web-link">EIP-712 and Permit2: A Developer’s Guide</a> <ul> <li><a href="#table-of-contents" class="web-link">Table of Contents</a></li> <li> <a href="#understanding-eip-712-making-signatures-human-readable" class="web-link">Understanding EIP-712: Making Signatures Human-Readable</a> <ul> <li><a href="#the-problem-users-signing-blind" class="web-link">The Problem: Users Signing Blind</a></li> <li><a href="#eip-712-the-solution" class="web-link">EIP-712: The Solution</a></li> <li> <a href="#how-eip-712-works-under-the-hood" class="web-link">How EIP-712 Works Under the Hood</a> <ul> <li><a href="#1-domain-separator-your-apps-unique-fingerprint" class="web-link">1. Domain Separator: Your App’s Unique Fingerprint</a></li> <li><a href="#2-type-hash-the-structure-definition" class="web-link">2. Type Hash: The Structure Definition</a></li> <li><a href="#3-struct-hash-encoding-your-actual-data" class="web-link">3. Struct Hash: Encoding Your Actual Data</a></li> <li><a href="#putting-it-all-together" class="web-link">Putting It All Together</a></li> </ul> </li> <li><a href="#verifying-eip-712-signatures-in-your-contract" class="web-link">Verifying EIP-712 Signatures in Your Contract</a></li> <li><a href="#advanced-eip-712-nested-structs" class="web-link">Advanced EIP-712: Nested Structs</a></li> <li> <a href="#advanced-eip-712-array-types" class="web-link">Advanced EIP-712: Array Types</a> <ul> <li><a href="#basic-array-types" class="web-link">Basic Array Types</a></li> <li><a href="#arrays-of-structs-the-complex-case" class="web-link">Arrays of Structs: The Complex Case</a></li> <li><a href="#the-array-hashing-algorithm" class="web-link">The Array Hashing Algorithm</a></li> <li><a href="#empty-arrays-and-edge-cases" class="web-link">Empty Arrays and Edge Cases</a></li> <li><a href="#practical-example-multi-vulnerability-payout-authorization" class="web-link">Practical Example: Multi-Vulnerability Payout Authorization</a></li> <li><a href="#critical-rules-for-array-hashing" class="web-link">Critical Rules for Array Hashing</a></li> <li><a href="#array-type-string-construction" class="web-link">Array Type String Construction</a></li> <li><a href="#common-array-pitfalls" class="web-link">Common Array Pitfalls</a></li> </ul> </li> <li><a href="#general-eip-712-pitfalls-and-best-practices" class="web-link">General EIP-712 Pitfalls and Best Practices</a></li> </ul> </li> <li> <a href="#permit2-the-ultimate-token-permission-system" class="web-link">Permit2: The Ultimate Token Permission System</a> <ul> <li><a href="#the-traditional-approval-problem" class="web-link">The Traditional Approval Problem</a></li> <li><a href="#what-is-permit2" class="web-link">What is Permit2?</a></li> <li> <a href="#permit2s-dual-architecture" class="web-link">Permit2’s Dual Architecture</a> <ul> <li><a href="#system-comparison-at-a-glance" class="web-link">System Comparison at a Glance</a></li> </ul> </li> <li> <a href="#allowancetransfer-enhanced-traditional-approvals" class="web-link">AllowanceTransfer: Enhanced Traditional Approvals</a> <ul> <li><a href="#core-data-structures" class="web-link">Core Data Structures</a></li> <li><a href="#how-allowancetransfer-works" class="web-link">How AllowanceTransfer Works</a></li> <li><a href="#allowancetransfer-eip-712-implementation" class="web-link">AllowanceTransfer EIP-712 Implementation</a></li> <li><a href="#using-allowancetransfer-in-your-bug-bounty-contract" class="web-link">Using AllowanceTransfer in Your Bug Bounty Contract</a></li> <li><a href="#ordered-nonce-management-in-allowancetransfer" class="web-link">Ordered Nonce Management in AllowanceTransfer</a></li> </ul> </li> <li> <a href="#signaturetransfer-direct-one-time-transfers" class="web-link">SignatureTransfer: Direct One-Time Transfers</a> <ul> <li><a href="#core-data-structures-1" class="web-link">Core Data Structures</a></li> <li><a href="#how-signaturetransfer-works" class="web-link">How SignatureTransfer Works</a></li> <li><a href="#signaturetransfer-eip-712-implementation" class="web-link">SignatureTransfer EIP-712 Implementation</a></li> <li><a href="#unordered-nonce-management-in-signaturetransfer" class="web-link">Unordered Nonce Management in SignatureTransfer</a></li> </ul> </li> <li> <a href="#batch-operations-maximum-efficiency" class="web-link">Batch Operations: Maximum Efficiency</a> <ul> <li><a href="#allowancetransfer-batch" class="web-link">AllowanceTransfer Batch</a></li> <li><a href="#signaturetransfer-batch" class="web-link">SignatureTransfer Batch</a></li> </ul> </li> <li><a href="#permit2s-eip-712-domain-setup" class="web-link">Permit2’s EIP-712 Domain Setup</a></li> <li> <a href="#security-considerations-and-error-handling" class="web-link">Security Considerations and Error Handling</a> <ul> <li><a href="#time-based-protections" class="web-link">Time-based Protections</a></li> <li><a href="#amount-validations" class="web-link">Amount Validations</a></li> <li><a href="#nonce-based-replay-protection" class="web-link">Nonce-based Replay Protection</a></li> </ul> </li> <li><a href="#emergency-features" class="web-link">Emergency Features</a></li> <li> <a href="#gas-efficiency-benefits" class="web-link">Gas Efficiency Benefits</a> <ul> <li><a href="#traditional-approach-vs-permit2" class="web-link">Traditional Approach vs Permit2</a></li> <li><a href="#permit2-approach" class="web-link">Permit2 Approach</a></li> <li><a href="#batch-operations-provide-maximum-efficiency" class="web-link">Batch Operations Provide Maximum Efficiency</a></li> </ul> </li> <li><a href="#integration-example-complete-bug-bounty-flow" class="web-link">Integration Example: Complete Bug Bounty Flow</a></li> <li><a href="#choosing-between-allowancetransfer-and-signaturetransfer" class="web-link">Choosing Between AllowanceTransfer and SignatureTransfer</a></li> <li><a href="#best-practices-for-bug-bounty-platforms" class="web-link">Best Practices for Bug Bounty Platforms</a></li> </ul> </li> <li> <a href="#permit2-witness-transfers-adding-custom-logic" class="web-link">Permit2 Witness Transfers: Adding Custom Logic</a> <ul> <li><a href="#what-are-witness-transfers" class="web-link">What are Witness Transfers?</a></li> <li><a href="#the-problem-witness-transfers-solve" class="web-link">The Problem Witness Transfers Solve</a></li> <li><a href="#witness-transfer-fundamentals" class="web-link">Witness Transfer Fundamentals</a></li> <li><a href="#basic-witness-implementation-vulnerability-verification" class="web-link">Basic Witness Implementation: Vulnerability Verification</a></li> <li><a href="#witness-type-string-the-critical-component" class="web-link">Witness Type String: The Critical Component</a></li> <li><a href="#advanced-witness-nested-structs" class="web-link">Advanced Witness: Nested Structs</a></li> <li><a href="#dynamic-data-witness-including-custom-instructions" class="web-link">Dynamic Data Witness: Including Custom Instructions</a></li> <li><a href="#array-witness-batch-vulnerability-processing" class="web-link">Array Witness: Batch Vulnerability Processing</a></li> <li><a href="#complete-signature-generation-for-witnesses" class="web-link">Complete Signature Generation for Witnesses</a></li> <li><a href="#witness-vs-non-witness-when-to-use-each" class="web-link">Witness vs Non-Witness: When to Use Each</a></li> <li><a href="#security-considerations-for-witness-transfers" class="web-link">Security Considerations for Witness Transfers</a></li> <li><a href="#advanced-patterns-conditional-logic" class="web-link">Advanced Patterns: Conditional Logic</a></li> <li><a href="#best-practices-for-witness-transfers" class="web-link">Best Practices for Witness Transfers</a></li> </ul> </li> <li> <a href="#conclusion" class="web-link">Conclusion</a> <ul> <li><a href="#what-youve-learned" class="web-link">What You’ve Learned</a></li> <li><a href="#the-bug-bounty-platform-a-complete-example" class="web-link">The Bug Bounty Platform: A Complete Example</a></li> <li><a href="#key-architectural-decisions" class="web-link">Key Architectural Decisions</a></li> <li><a href="#getting-started" class="web-link">Getting Started</a></li> <li><a href="#resources-for-continued-learning" class="web-link">Resources for Continued Learning</a></li> <li><a href="#final-thoughts" class="web-link">Final Thoughts</a></li> </ul> </li> </ul> </li> </ul> <hr> <h2 id="understanding-eip-712-making-signatures-human-readable">Understanding EIP-712: Making Signatures Human-Readable</h2> <h3 id="the-problem-users-signing-blind">The Problem: Users Signing Blind</h3> <p>Imagine you’re building a decentralized bug bounty platform where security researchers get paid in tokens for finding vulnerabilities. Before EIP-712, if a project team wanted to approve a bounty, they’d see something like this in their wallet:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Sign this message: 0x1c8aff950685c2ed4bc3174f3472287b56d9517b9c948127319a09a7a36deac8 </code></pre></div></div> <p>That’s completely meaningless to humans. The team has no idea if they’re signing a claim for a legitimate $1,000 bounty or accidentally signing away their entire wallet. This experience creates massive security risks and terrible user experiences.</p> <h3 id="eip-712-the-solution">EIP-712: The Solution</h3> <p>EIP-712 (Ethereum Improvement Proposal 712) solves this by letting users sign <strong>structured, meaningful data</strong> that wallets can display clearly. Instead of mysterious hex, project teams see exactly what they’re signing:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="nl">"Bounty Payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x742d35cc6634c0532925a3b8d428c1e21c2a2e59"</span><span class="p">,</span><span class="w"> </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000 USDC"</span><span class="p">,</span><span class="w"> </span><span class="nl">"bugId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SOL-2025-003"</span><span class="p">,</span><span class="w"> </span><span class="nl">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Critical"</span><span class="p">,</span><span class="w"> </span><span class="nl">"deadline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-01-15 14:30:00 UTC"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span></code></pre></div></div> <p>Bringing clarity to the information being signed makes crypto more secure and user-friendly.</p> <h3 id="how-eip-712-works-under-the-hood">How EIP-712 Works Under the Hood</h3> <p>When you sign structured data with EIP-712, the process combines three essential components into a final hash that gets signed. Think of it like creating a tamper-proof package with multiple security seals:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Final Hash = keccak256("\x19\x01" ‖ Domain Separator ‖ Struct Hash) </code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">\x19\x01</code> prefix is a magic value that prevents this signature from ever being confused with a regular Ethereum transaction. Let’s break down the other components:</p> <h4 id="1-domain-separator-your-apps-unique-fingerprint">1. Domain Separator: Your App’s Unique Fingerprint</h4> <p>The domain separator is like a unique seal that ensures signatures can only be used in your specific application. It prevents replay attacks across different protocols. Here’s what it contains:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">EIP712Domain</span> <span class="p">{</span> <span class="kt">string</span> <span class="n">name</span><span class="p">;</span> <span class="c1">// "HackerBounty" </span> <span class="kt">string</span> <span class="n">version</span><span class="p">;</span> <span class="c1">// "1" </span> <span class="kt">uint256</span> <span class="n">chainId</span><span class="p">;</span> <span class="c1">// 1 (Ethereum mainnet) </span> <span class="kt">address</span> <span class="n">verifyingContract</span><span class="p">;</span> <span class="c1">// 0x1234...abcd </span><span class="p">}</span> </code></pre></div></div> <p>Each field serves a critical purpose:</p> <ul> <li> <strong>name</strong>: Your protocol’s name.</li> <li> <strong>version</strong>: Allows you to upgrade your protocol while invalidating old signatures</li> <li> <strong>chainId</strong>: Prevents signatures from Ethereum being used on Arbitrum or other chains</li> <li> <strong>verifyingContract</strong>: Ties signatures to your specific deployed contract address</li> </ul> <p>The domain separator is computed once and can be stored:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bytes32</span> <span class="n">DOMAIN_SEPARATOR</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="nb">keccak256</span><span class="p">(</span><span class="s">"EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)"</span><span class="p">),</span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="s">"HackerBounty"</span><span class="p">)),</span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="s">"1"</span><span class="p">)),</span> <span class="n">block</span><span class="p">.</span><span class="n">chainid</span><span class="p">,</span> <span class="kt">address</span><span class="p">(</span><span class="nb">this</span><span class="p">)</span> <span class="p">));</span> </code></pre></div></div> <p>This unique set of variables ensures that every app can avoid signature reuse between other applications, or even incompatible versions of itself.</p> <h4 id="2-type-hash-the-structure-definition">2. Type Hash: The Structure Definition</h4> <p>Every data structure you want to sign needs a type hash. Think of it as a schema definition that ensures both the signer and verifier agree on exactly what fields exist and their types. For our bug bounty payment:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">BountyPayment</span> <span class="p">{</span> <span class="kt">address</span> <span class="n">recipient</span><span class="p">;</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">;</span> <span class="kt">string</span> <span class="n">bugId</span><span class="p">;</span> <span class="kt">uint8</span> <span class="n">severity</span><span class="p">;</span> <span class="kt">uint256</span> <span class="n">deadline</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// The type hash is the keccak256 of the struct definition string </span><span class="kt">bytes32</span> <span class="n">PAYMENT_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"BountyPayment(address recipient,uint256 amount,string bugId,uint8 severity,uint256 deadline)"</span> <span class="p">);</span> </code></pre></div></div> <p>This type hash becomes part of the struct hash (explained next), ensuring that even if an attacker tries to add or remove fields, the signature becomes invalid.</p> <h4 id="3-struct-hash-encoding-your-actual-data">3. Struct Hash: Encoding Your Actual Data</h4> <p>This is where your actual bounty payment data gets encoded and hashed. The encoding follows specific rules based on the data types:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">hashPayment</span><span class="p">(</span><span class="n">BountyPayment</span> <span class="k">memory</span> <span class="n">payment</span><span class="p">)</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">PAYMENT_TYPEHASH</span><span class="p">,</span> <span class="c1">// Always first - identifies the struct type </span> <span class="n">payment</span><span class="p">.</span><span class="n">recipient</span><span class="p">,</span> <span class="c1">// address: encoded as-is (static type) </span> <span class="n">payment</span><span class="p">.</span><span class="n">amount</span><span class="p">,</span> <span class="c1">// uint256: encoded as-is (static type) </span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="n">payment</span><span class="p">.</span><span class="n">bugId</span><span class="p">)),</span> <span class="c1">// string: must be hashed first (dynamic type) </span> <span class="n">payment</span><span class="p">.</span><span class="n">severity</span><span class="p">,</span> <span class="c1">// uint8: encoded as-is (static type) </span> <span class="n">payment</span><span class="p">.</span><span class="n">deadline</span> <span class="c1">// uint256: encoded as-is (static type) </span> <span class="p">));</span> <span class="p">}</span> </code></pre></div></div> <p><strong>Critical Encoding Rules:</strong></p> <ul> <li> <strong>Static types</strong> (address, uint, bool, bytes1-bytes32) are encoded directly with <code class="language-plaintext highlighter-rouge">abi.encode</code> </li> <li> <strong>Dynamic types</strong> (string, bytes, arrays) must be hashed with <code class="language-plaintext highlighter-rouge">keccak256</code> first</li> <li>The type hash always comes first in the encoding</li> <li>Field order must match the type definition exactly</li> </ul> <h4 id="putting-it-all-together">Putting It All Together</h4> <p>Here’s the complete flow for creating an EIP-712 signature:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. Define your struct and create an instance </span><span class="n">BountyPayment</span> <span class="k">memory</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">BountyPayment</span><span class="p">({</span> <span class="n">recipient</span><span class="o">:</span> <span class="mh">0x742d35cc6634c0532925a3b8d428c1e21c2a2e59</span><span class="p">,</span> <span class="n">amount</span><span class="o">:</span> <span class="mi">10000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="c1">// 10000 USDC (6 decimals) </span> <span class="n">bugId</span><span class="o">:</span> <span class="s">"SOL-2025-003"</span><span class="p">,</span> <span class="n">severity</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="c1">// Critical </span> <span class="n">deadline</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">24</span> <span class="kc">hours</span> <span class="p">});</span> <span class="c1">// 2. Hash the struct </span><span class="kt">bytes32</span> <span class="n">structHash</span> <span class="o">=</span> <span class="n">hashPayment</span><span class="p">(</span><span class="n">payment</span><span class="p">);</span> <span class="c1">// 3. Create the final digest </span><span class="kt">bytes32</span> <span class="n">digest</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span> <span class="s">"</span><span class="se">\x19\x01</span><span class="s">"</span><span class="p">,</span> <span class="n">DOMAIN_SEPARATOR</span><span class="p">,</span> <span class="n">structHash</span> <span class="p">));</span> <span class="c1">// 4. Sign the digest (in practice, this happens in the project team's wallet, but this is how foundry does it) </span><span class="p">(</span><span class="kt">uint8</span> <span class="n">v</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">r</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">s</span><span class="p">)</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">privateKey</span><span class="p">,</span> <span class="n">digest</span><span class="p">);</span> </code></pre></div></div> <h3 id="verifying-eip-712-signatures-in-your-contract">Verifying EIP-712 Signatures in Your Contract</h3> <p>Once a project team submits their signed payment authorization, your contract needs to verify it:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">contract</span> <span class="n">HackerBounty</span> <span class="p">{</span> <span class="kt">bytes32</span> <span class="k">public</span> <span class="k">constant</span> <span class="n">DOMAIN_SEPARATOR</span> <span class="o">=</span> <span class="cm">/* computed at deployment */</span><span class="p">;</span> <span class="k">mapping</span><span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">)</span> <span class="k">public</span> <span class="n">nonces</span><span class="p">;</span> <span class="k">mapping</span><span class="p">(</span><span class="kt">string</span> <span class="o">=&gt;</span> <span class="kt">bool</span><span class="p">)</span> <span class="k">public</span> <span class="n">processedBugs</span><span class="p">;</span> <span class="k">mapping</span><span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">bool</span><span class="p">)</span> <span class="k">public</span> <span class="n">authorizedProjects</span><span class="p">;</span> <span class="k">function</span> <span class="n">processBountyPayment</span><span class="p">(</span> <span class="n">BountyPayment</span> <span class="k">calldata</span> <span class="n">payment</span><span class="p">,</span> <span class="kt">uint8</span> <span class="n">v</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">r</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">s</span> <span class="p">)</span> <span class="k">external</span> <span class="p">{</span> <span class="c1">// Prevent double-processing </span> <span class="nb">require</span><span class="p">(</span><span class="o">!</span><span class="n">processedBugs</span><span class="p">[</span><span class="n">payment</span><span class="p">.</span><span class="n">bugId</span><span class="p">],</span> <span class="s">"Bug already processed"</span><span class="p">);</span> <span class="nb">require</span><span class="p">(</span><span class="n">payment</span><span class="p">.</span><span class="n">deadline</span> <span class="o">&gt;=</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span><span class="p">,</span> <span class="s">"Payment expired"</span><span class="p">);</span> <span class="c1">// Recreate the digest </span> <span class="kt">bytes32</span> <span class="n">digest</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span> <span class="s">"</span><span class="se">\x19\x01</span><span class="s">"</span><span class="p">,</span> <span class="n">DOMAIN_SEPARATOR</span><span class="p">,</span> <span class="n">hashPayment</span><span class="p">(</span><span class="n">payment</span><span class="p">)</span> <span class="p">));</span> <span class="c1">// Recover the signer (should be the project team) </span> <span class="kt">address</span> <span class="n">projectTeam</span> <span class="o">=</span> <span class="nb">ecrecover</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span> <span class="nb">require</span><span class="p">(</span><span class="n">authorizedProjects</span><span class="p">[</span><span class="n">projectTeam</span><span class="p">],</span> <span class="s">"Unauthorized project"</span><span class="p">);</span> <span class="c1">// Mark as processed and pay out </span> <span class="n">processedBugs</span><span class="p">[</span><span class="n">payment</span><span class="p">.</span><span class="n">bugId</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="n">IERC20</span><span class="p">(</span><span class="n">USDC</span><span class="p">).</span><span class="n">transferFrom</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">payment</span><span class="p">.</span><span class="n">recipient</span><span class="p">,</span> <span class="n">payment</span><span class="p">.</span><span class="n">amount</span><span class="p">);</span> <span class="k">emit</span> <span class="n">BountyPaid</span><span class="p">(</span><span class="n">payment</span><span class="p">.</span><span class="n">recipient</span><span class="p">,</span> <span class="n">payment</span><span class="p">.</span><span class="n">bugId</span><span class="p">,</span> <span class="n">payment</span><span class="p">.</span><span class="n">amount</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span> </code></pre></div></div> <h3 id="advanced-eip-712-nested-structs">Advanced EIP-712: Nested Structs</h3> <p>As your bug bounty platform grows, you might need more complex data structures. EIP-712 supports nested structs, but they require special handling:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">PaymentDetails</span> <span class="p">{</span> <span class="kt">string</span> <span class="n">bugId</span><span class="p">;</span> <span class="kt">uint8</span> <span class="n">severity</span><span class="p">;</span> <span class="kt">string</span> <span class="n">description</span><span class="p">;</span> <span class="p">}</span> <span class="k">struct</span> <span class="n">AdvancedPayment</span> <span class="p">{</span> <span class="kt">address</span> <span class="n">recipient</span><span class="p">;</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">;</span> <span class="n">PaymentDetails</span> <span class="n">details</span><span class="p">;</span> <span class="c1">// Nested struct </span> <span class="kt">uint256</span> <span class="n">deadline</span><span class="p">;</span> <span class="p">}</span> </code></pre></div></div> <p>When working with nested structs:</p> <ol> <li>Each nested struct needs its own type hash</li> <li>Hash nested structs separately, then use their hash in the parent</li> <li>Type definitions must include all referenced structs</li> </ol> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">DETAILS_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"PaymentDetails(string bugId,uint8 severity,string description)"</span> <span class="p">);</span> <span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">ADVANCED_PAYMENT_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"AdvancedPayment(address recipient,uint256 amount,PaymentDetails details,uint256 deadline)PaymentDetails(string bugId,uint8 severity,string description)"</span> <span class="p">);</span> <span class="k">function</span> <span class="n">hashAdvancedPayment</span><span class="p">(</span><span class="n">AdvancedPayment</span> <span class="k">memory</span> <span class="n">payment</span><span class="p">)</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// First hash the nested struct </span> <span class="kt">bytes32</span> <span class="n">detailsHash</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">DETAILS_TYPEHASH</span><span class="p">,</span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="n">payment</span><span class="p">.</span><span class="n">details</span><span class="p">.</span><span class="n">bugId</span><span class="p">)),</span> <span class="c1">// dynamic type </span> <span class="n">payment</span><span class="p">.</span><span class="n">details</span><span class="p">.</span><span class="n">severity</span><span class="p">,</span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="n">payment</span><span class="p">.</span><span class="n">details</span><span class="p">.</span><span class="n">description</span><span class="p">))</span> <span class="c1">// dynamic type </span> <span class="p">));</span> <span class="c1">// Then hash the parent struct using the nested struct's hash </span> <span class="k">return</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">ADVANCED_PAYMENT_TYPEHASH</span><span class="p">,</span> <span class="n">payment</span><span class="p">.</span><span class="n">recipient</span><span class="p">,</span> <span class="n">payment</span><span class="p">.</span><span class="n">amount</span><span class="p">,</span> <span class="n">detailsHash</span><span class="p">,</span> <span class="c1">// Use the hash, not the struct itself </span> <span class="n">payment</span><span class="p">.</span><span class="n">deadline</span> <span class="p">));</span> <span class="p">}</span> </code></pre></div></div> <h3 id="advanced-eip-712-array-types">Advanced EIP-712: Array Types</h3> <p>Real-world bug bounty platforms often need to handle multiple actions or data points in a single transaction. Perhaps a project team wants to pay multiple researchers for different vulnerabilities, or your platform needs to process batched bounty payouts. EIP-712 supports arrays, but they follow specific hashing rules that are crucial to understand.</p> <h4 id="basic-array-types">Basic Array Types</h4> <p>Let’s start with simple arrays of basic types:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">BatchPayout</span> <span class="p">{</span> <span class="kt">address</span><span class="p">[]</span> <span class="n">recipients</span><span class="p">;</span> <span class="c1">// Array of researcher addresses </span> <span class="kt">uint256</span><span class="p">[]</span> <span class="n">amounts</span><span class="p">;</span> <span class="c1">// Array of payment amounts </span> <span class="kt">string</span><span class="p">[]</span> <span class="n">bugIds</span><span class="p">;</span> <span class="c1">// Array of bug IDs </span> <span class="kt">uint256</span> <span class="n">deadline</span><span class="p">;</span> <span class="p">}</span> <span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">BATCH_PAYOUT_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"BatchPayout(address[] recipients,uint256[] amounts,string[] bugIds,uint256 deadline)"</span> <span class="p">);</span> </code></pre></div></div> <p><strong>Key rules for basic arrays:</strong></p> <ul> <li>Array types are denoted with <code class="language-plaintext highlighter-rouge">[]</code> in the type definition</li> <li>Arrays are always treated as dynamic types, even if they contain static elements</li> <li>Arrays must be hashed using <code class="language-plaintext highlighter-rouge">keccak256</code> before encoding in the parent struct</li> </ul> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">hashBatchPayout</span><span class="p">(</span><span class="n">BatchPayout</span> <span class="k">memory</span> <span class="n">payout</span><span class="p">)</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">BATCH_PAYOUT_TYPEHASH</span><span class="p">,</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span><span class="n">payout</span><span class="p">.</span><span class="n">recipients</span><span class="p">)),</span> <span class="c1">// Hash the packed array </span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span><span class="n">payout</span><span class="p">.</span><span class="n">amounts</span><span class="p">)),</span> <span class="c1">// Hash the packed array </span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span> <span class="c1">// String arrays need special handling </span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="n">payout</span><span class="p">.</span><span class="n">bugIds</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span> <span class="c1">// Hash each string element </span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="n">payout</span><span class="p">.</span><span class="n">bugIds</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span> <span class="c1">// then pack and hash the result </span> <span class="c1">// ... for each element </span> <span class="p">)),</span> <span class="n">payout</span><span class="p">.</span><span class="n">deadline</span> <span class="p">));</span> <span class="p">}</span> </code></pre></div></div> <h4 id="arrays-of-structs-the-complex-case">Arrays of Structs: The Complex Case</h4> <p>The most sophisticated scenario involves arrays of custom structs. Imagine your bug bounty platform needs to handle multiple vulnerability payouts in a single transaction:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">VulnerabilityPayout</span> <span class="p">{</span> <span class="kt">string</span> <span class="n">bugId</span><span class="p">;</span> <span class="kt">uint8</span> <span class="n">severity</span><span class="p">;</span> <span class="kt">string</span> <span class="n">description</span><span class="p">;</span> <span class="kt">address</span> <span class="n">recipient</span><span class="p">;</span> <span class="p">}</span> <span class="k">struct</span> <span class="n">MultiPayoutAuthorization</span> <span class="p">{</span> <span class="kt">address</span> <span class="n">projectTeam</span><span class="p">;</span> <span class="n">VulnerabilityPayout</span><span class="p">[]</span> <span class="n">payouts</span><span class="p">;</span> <span class="c1">// Array of structs </span> <span class="kt">uint256</span> <span class="n">totalAmount</span><span class="p">;</span> <span class="kt">uint256</span> <span class="n">deadline</span><span class="p">;</span> <span class="p">}</span> </code></pre></div></div> <p>This requires careful handling of the type definitions and hashing:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Individual struct type hash </span><span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">VULNERABILITY_PAYOUT_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"VulnerabilityPayout(string bugId,uint8 severity,string description,address recipient)"</span> <span class="p">);</span> <span class="c1">// Main struct type hash, all referenced structs are included alphabetically </span><span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">MULTI_PAYOUT_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"MultiPayoutAuthorization(address projectTeam,VulnerabilityPayout[] payouts,uint256 totalAmount,uint256 deadline)VulnerabilityPayout(string bugId,uint8 severity,string description,address recipient)"</span> <span class="p">);</span> </code></pre></div></div> <h4 id="the-array-hashing-algorithm">The Array Hashing Algorithm</h4> <p>Arrays of structs follow a specific concatenation and hashing pattern defined by EIP-712:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">_hashPayoutArray</span><span class="p">(</span><span class="n">VulnerabilityPayout</span><span class="p">[]</span> <span class="k">memory</span> <span class="n">payouts</span><span class="p">)</span> <span class="k">internal</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Handle empty arrays </span> <span class="k">if</span> <span class="p">(</span><span class="n">payouts</span><span class="p">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">keccak256</span><span class="p">(</span><span class="s">""</span><span class="p">);</span> <span class="p">}</span> <span class="c1">// For non-empty arrays: hash each element, concatenate, then hash the result </span> <span class="kt">bytes</span> <span class="k">memory</span> <span class="n">encodedPayouts</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span> <span class="k">for</span> <span class="p">(</span><span class="kt">uint256</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">payouts</span><span class="p">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Hash each struct individually using its type hash </span> <span class="kt">bytes32</span> <span class="n">payoutHash</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">VULNERABILITY_PAYOUT_TYPEHASH</span><span class="p">,</span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="n">payouts</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">bugId</span><span class="p">)),</span> <span class="c1">// Dynamic type: hash first </span> <span class="n">payouts</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">severity</span><span class="p">,</span> <span class="c1">// Static type: encode directly </span> <span class="nb">keccak256</span><span class="p">(</span><span class="kt">bytes</span><span class="p">(</span><span class="n">payouts</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">description</span><span class="p">)),</span> <span class="c1">// Dynamic type: hash first </span> <span class="n">payouts</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">recipient</span> <span class="c1">// Static type: encode directly </span> <span class="p">));</span> <span class="c1">// Concatenate this hash to our running bytes </span> <span class="n">encodedPayouts</span> <span class="o">=</span> <span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span><span class="n">encodedPayouts</span><span class="p">,</span> <span class="n">payoutHash</span><span class="p">);</span> <span class="p">}</span> <span class="c1">// Hash the concatenated result </span> <span class="k">return</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">encodedPayouts</span><span class="p">);</span> <span class="p">}</span> <span class="k">function</span> <span class="n">hashMultiPayoutAuthorization</span><span class="p">(</span><span class="n">MultiPayoutAuthorization</span> <span class="k">memory</span> <span class="n">auth</span><span class="p">)</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">MULTI_PAYOUT_TYPEHASH</span><span class="p">,</span> <span class="n">auth</span><span class="p">.</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">_hashPayoutArray</span><span class="p">(</span><span class="n">auth</span><span class="p">.</span><span class="n">payouts</span><span class="p">),</span> <span class="c1">// Use the hash of the array </span> <span class="n">auth</span><span class="p">.</span><span class="n">totalAmount</span><span class="p">,</span> <span class="n">auth</span><span class="p">.</span><span class="n">deadline</span> <span class="p">));</span> <span class="p">}</span> </code></pre></div></div> <h4 id="empty-arrays-and-edge-cases">Empty Arrays and Edge Cases</h4> <p>Empty arrays have special handling that’s important to understand:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">demonstrateEmptyArrays</span><span class="p">()</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">)</span> <span class="p">{</span> <span class="n">VulnerabilityPayout</span><span class="p">[]</span> <span class="k">memory</span> <span class="n">emptyPayouts</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VulnerabilityPayout</span><span class="p">[](</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// Empty arrays hash to keccak256("") </span> <span class="kt">bytes32</span> <span class="n">emptyHash</span> <span class="o">=</span> <span class="n">_hashPayoutArray</span><span class="p">(</span><span class="n">emptyPayouts</span><span class="p">);</span> <span class="nb">assert</span><span class="p">(</span><span class="n">emptyHash</span> <span class="o">==</span> <span class="nb">keccak256</span><span class="p">(</span><span class="s">""</span><span class="p">));</span> <span class="k">return</span> <span class="n">emptyHash</span><span class="p">;</span> <span class="p">}</span> </code></pre></div></div> <p>This ensures that empty arrays have a consistent, deterministic hash while remaining distinct from other empty data.</p> <h4 id="practical-example-multi-vulnerability-payout-authorization">Practical Example: Multi-Vulnerability Payout Authorization</h4> <p>Here’s how a complete multi-vulnerability payout authorization would work:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">authorizeMultiplePayouts</span><span class="p">()</span> <span class="k">external</span> <span class="p">{</span> <span class="c1">// Create multiple vulnerability payouts </span> <span class="n">VulnerabilityPayout</span><span class="p">[]</span> <span class="k">memory</span> <span class="n">payouts</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VulnerabilityPayout</span><span class="p">[](</span><span class="mi">2</span><span class="p">);</span> <span class="n">payouts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">VulnerabilityPayout</span><span class="p">({</span> <span class="n">bugId</span><span class="o">:</span> <span class="s">"RE-2025-003"</span><span class="p">,</span> <span class="n">severity</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="c1">// Critical </span> <span class="n">description</span><span class="o">:</span> <span class="s">"Reentrancy can drain the contract in one transaction"</span><span class="p">,</span> <span class="n">recipient</span><span class="o">:</span> <span class="mh">0x1234567890123456789012345678901234567890</span> <span class="c1">// Researcher A </span> <span class="p">});</span> <span class="n">payouts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">VulnerabilityPayout</span><span class="p">({</span> <span class="n">bugId</span><span class="o">:</span> <span class="s">"DEP-2025-002"</span><span class="p">,</span> <span class="n">severity</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// Medium </span> <span class="n">description</span><span class="o">:</span> <span class="s">"Bad order construction can lead to user deposits not being refunded"</span><span class="p">,</span> <span class="n">recipient</span><span class="o">:</span> <span class="mh">0xABCDEF1234567890123456789012345678901234</span> <span class="c1">// Researcher B </span> <span class="p">});</span> <span class="n">MultiPayoutAuthorization</span> <span class="k">memory</span> <span class="n">authorization</span> <span class="o">=</span> <span class="n">MultiPayoutAuthorization</span><span class="p">({</span> <span class="n">projectTeam</span><span class="o">:</span> <span class="n">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">,</span> <span class="n">payouts</span><span class="o">:</span> <span class="n">payouts</span><span class="p">,</span> <span class="n">totalAmount</span><span class="o">:</span> <span class="mi">5000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="c1">// 5000 USDC total </span> <span class="n">deadline</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">7</span> <span class="kc">days</span> <span class="p">});</span> <span class="c1">// The hash includes all payout data in a tamper-proof way </span> <span class="kt">bytes32</span> <span class="n">authHash</span> <span class="o">=</span> <span class="n">hashMultiPayoutAuthorization</span><span class="p">(</span><span class="n">authorization</span><span class="p">);</span> <span class="c1">// Project team signs this hash, knowing exactly what researchers they're paying </span> <span class="c1">// Wallet will display the structured data clearly </span> <span class="c1">// {Payment splitting and processing logic} </span><span class="p">}</span> </code></pre></div></div> <h4 id="critical-rules-for-array-hashing">Critical Rules for Array Hashing</h4> <ol> <li> <strong>Empty Arrays</strong>: Always hash to <code class="language-plaintext highlighter-rouge">keccak256("")</code> </li> <li> <strong>Non-Empty Static Type Arrays</strong>: Hash the entire <code class="language-plaintext highlighter-rouge">abi.encodePacked</code> array</li> <li> <strong>Non-Empty Dynamic Type Arrays</strong>: Hash each element individually, concatenate with <code class="language-plaintext highlighter-rouge">abi.encodePacked</code>, then hash the result</li> <li> <strong>Dynamic Types in Arrays</strong>: String and bytes fields within array elements must be hashed before encoding</li> <li> <strong>Order Matters</strong>: Array element order affects the final hash</li> <li> <strong>Type Definitions</strong>: Include all referenced struct types in alphabetical order</li> </ol> <h4 id="array-type-string-construction">Array Type String Construction</h4> <p>When arrays are involved, your type strings become more complex but follow predictable patterns:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// For arrays of structs, all referenced types must be included </span><span class="kt">string</span> <span class="k">constant</span> <span class="n">MULTI_PAYOUT_TYPE_STRING</span> <span class="o">=</span> <span class="s">"MultiPayoutAuthorization(address projectTeam,VulnerabilityPayout[] payouts,uint256 totalAmount,uint256 deadline)VulnerabilityPayout(string bugId,uint8 severity,string description,address recipient)"</span><span class="p">;</span> <span class="c1">// For simple arrays </span><span class="kt">string</span> <span class="k">constant</span> <span class="n">BATCH_PAYOUT_TYPE_STRING</span> <span class="o">=</span> <span class="s">"BatchPayout(address[] recipients,uint256[] amounts,string[] bugIds,uint256 deadline)"</span><span class="p">;</span> </code></pre></div></div> <h4 id="common-array-pitfalls">Common Array Pitfalls</h4> <ol> <li> <strong>Forgetting Empty Array Handling</strong>: Always check for empty arrays and return <code class="language-plaintext highlighter-rouge">keccak256("")</code> </li> <li> <strong>Wrong Concatenation Method</strong>: Use <code class="language-plaintext highlighter-rouge">abi.encodePacked</code> for concatenating hashes, not <code class="language-plaintext highlighter-rouge">abi.encode</code> </li> <li> <strong>Type String Mismatches</strong>: Array notation in type strings must exactly match struct definitions</li> <li> <strong>Dynamic Type Confusion</strong>: Remember that arrays themselves are always dynamic, even arrays of static types</li> <li> <strong>Order Dependencies</strong>: Changing array element order changes the hash - ensure consistent ordering</li> </ol> <p>Understanding array hashing is crucial for building sophisticated EIP-712 systems. The patterns you’ve learned here will handle the vast majority of real-world scenarios, from simple batch operations to complex multi-struct arrays.</p> <h3 id="general-eip-712-pitfalls-and-best-practices">General EIP-712 Pitfalls and Best Practices</h3> <ol> <li> <strong>Dynamic Type Encoding:</strong> Always hash strings, bytes, and arrays before encoding</li> <li> <strong>Field Order:</strong> Must match exactly between type definition and encoding</li> <li> <strong>Type String Format:</strong> No spaces except after commas, exact type names</li> <li> <strong>Nested Struct Definitions:</strong> Include all referenced structs in alphabetical order</li> <li> <strong>Domain Separator Caching:</strong> Can be computed once at deployment if chainId won’t change</li> </ol> <p>Now that you understand EIP-712’s structured signatures, let’s see how Permit2 builds on this foundation to create a universal token approval system in the next section.</p> <h2 id="permit2-the-ultimate-token-permission-system">Permit2: The Ultimate Token Permission System</h2> <h3 id="the-traditional-approval-problem">The Traditional Approval Problem</h3> <p>Before diving into permit2’s solutions, let’s understand the fundamental problem it solves. In traditional ERC-20 token systems, if your bug bounty platform wants to process payments from project teams to security researchers, you face a cumbersome two-step process:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Step 1: Project team approves your contract (requires gas) </span><span class="n">IERC20</span><span class="p">(</span><span class="n">token</span><span class="p">).</span><span class="n">approve</span><span class="p">(</span><span class="n">bugBountyContract</span><span class="p">,</span> <span class="n">amount</span><span class="p">);</span> <span class="c1">// Step 2: Your contract transfers tokens to researchers (requires more gas) </span><span class="n">IERC20</span><span class="p">(</span><span class="n">token</span><span class="p">).</span><span class="n">transferFrom</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">researcher</span><span class="p">,</span> <span class="n">amount</span><span class="p">);</span> </code></pre></div></div> <p>This creates several problems for your bug bounty platform:</p> <ol> <li> <strong>Poor User Experience</strong>: Project teams must send two separate transactions per payout</li> <li> <strong>Gas Inefficiency</strong>: Each approval costs gas, even if never used</li> <li> <strong>Security Risks</strong>: Unlimited approvals create attack vectors</li> <li> <strong>No Expiration</strong>: Approvals persist indefinitely</li> <li> <strong>Inflexibility</strong>: Can’t bundle approvals with complex logic</li> </ol> <h3 id="what-is-permit2">What is Permit2?</h3> <p>Permit2 is Uniswap’s battle-tested signature-based token permission system deployed at <code class="language-plaintext highlighter-rouge">0x000000000022D473030F116dDEE9F6B43aC78BA3</code> on all major networks. It solves the approval problem by introducing:</p> <ul> <li> <strong>Signature-based permissions</strong> instead of on-chain approvals</li> <li> <strong>Time-bound and amount-limited</strong> token access</li> <li> <strong>Batch operations</strong> for multiple tokens</li> <li> <strong>Gasless approvals</strong> that don’t require upfront transactions</li> <li> <strong>Witness data</strong> for custom protocol logic (covered in Section 3)</li> </ul> <p>Your bug bounty platform benefits in multiple ways:</p> <ul> <li>Project teams sign once instead of sending multiple transactions for each researcher payout</li> <li>You can bundle token transfers with vulnerability verification logic</li> <li>Time-limited permissions reduce long-term security risks</li> <li>Batch operations enable complex multi-researcher bounty payouts</li> </ul> <h3 id="permit2s-dual-architecture">Permit2’s Dual Architecture</h3> <p>Permit2 provides two complementary systems, each optimized for different use cases:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">interface</span> <span class="n">IPermit2</span> <span class="k">is</span> <span class="n">ISignatureTransfer</span><span class="p">,</span> <span class="n">IAllowanceTransfer</span> <span class="p">{</span> <span class="c1">// Unified interface providing maximum flexibility </span><span class="p">}</span> </code></pre></div></div> <h4 id="system-comparison-at-a-glance">System Comparison at a Glance</h4> <table> <thead> <tr> <th>Feature</th> <th>AllowanceTransfer</th> <th>SignatureTransfer</th> </tr> </thead> <tbody> <tr> <td><strong>Use Case</strong></td> <td>Traditional approvals with signatures</td> <td>One-time direct transfers</td> </tr> <tr> <td><strong>Setup</strong></td> <td>Sign once, transfer many times</td> <td>Sign per transfer</td> </tr> <tr> <td><strong>Nonce Management</strong></td> <td>Ordered (sequential)</td> <td>Unordered (bitmap-based)</td> </tr> <tr> <td><strong>Best For</strong></td> <td>Recurring payments, subscriptions</td> <td>Order fulfillment, atomic swaps</td> </tr> <tr> <td><strong>Gas Efficiency</strong></td> <td>Optimal for multiple transfers</td> <td>Optimal for single transfers</td> </tr> </tbody> </table> <h3 id="allowancetransfer-enhanced-traditional-approvals">AllowanceTransfer: Enhanced Traditional Approvals</h3> <p>AllowanceTransfer modernizes the traditional approval pattern with signature-based permissions. Think of it as “allowances with expiration dates and gasless setup.”</p> <h4 id="core-data-structures">Core Data Structures</h4> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">PermitDetails</span> <span class="p">{</span> <span class="kt">address</span> <span class="n">token</span><span class="p">;</span> <span class="c1">// The ERC20 token address </span> <span class="kt">uint160</span> <span class="n">amount</span><span class="p">;</span> <span class="c1">// Maximum spendable amount </span> <span class="kt">uint48</span> <span class="n">expiration</span><span class="p">;</span> <span class="c1">// Unix timestamp when permission expires </span> <span class="kt">uint48</span> <span class="n">nonce</span><span class="p">;</span> <span class="c1">// Ordered nonce for replay protection </span><span class="p">}</span> <span class="k">struct</span> <span class="n">PermitSingle</span> <span class="p">{</span> <span class="n">PermitDetails</span> <span class="n">details</span><span class="p">;</span> <span class="c1">// The permission details </span> <span class="kt">address</span> <span class="n">spender</span><span class="p">;</span> <span class="c1">// Who can spend the tokens </span> <span class="kt">uint256</span> <span class="n">sigDeadline</span><span class="p">;</span> <span class="c1">// Signature validity deadline </span><span class="p">}</span> <span class="k">struct</span> <span class="n">PackedAllowance</span> <span class="p">{</span> <span class="kt">uint160</span> <span class="n">amount</span><span class="p">;</span> <span class="c1">// Current remaining allowance </span> <span class="kt">uint48</span> <span class="n">expiration</span><span class="p">;</span> <span class="c1">// When this allowance expires </span> <span class="kt">uint48</span> <span class="n">nonce</span><span class="p">;</span> <span class="c1">// Current nonce for this owner/token/spender </span><span class="p">}</span> </code></pre></div></div> <h4 id="how-allowancetransfer-works">How AllowanceTransfer Works</h4> <p>The AllowanceTransfer system maintains a three-dimensional mapping that tracks permissions:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mapping</span><span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="k">mapping</span><span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="k">mapping</span><span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="n">PackedAllowance</span><span class="p">)))</span> <span class="k">public</span> <span class="n">allowance</span><span class="p">;</span> <span class="c1">// owner =&gt; token =&gt; spender =&gt; permission details </span></code></pre></div></div> <p>For your bug bounty platform, here’s how a project team would grant permission for researcher payouts:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. Project team creates a permit for your contract to spend their tokens for bounties </span><span class="n">PermitSingle</span> <span class="k">memory</span> <span class="n">permit</span> <span class="o">=</span> <span class="n">PermitSingle</span><span class="p">({</span> <span class="n">details</span><span class="o">:</span> <span class="n">PermitDetails</span><span class="p">({</span> <span class="n">token</span><span class="o">:</span> <span class="kt">address</span><span class="p">(</span><span class="n">USDC</span><span class="p">),</span> <span class="n">amount</span><span class="o">:</span> <span class="mi">10000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="c1">// 10,000 USDC maximum for bounties </span> <span class="n">expiration</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">30</span> <span class="kc">days</span><span class="p">,</span> <span class="c1">// Valid for 30 days </span> <span class="n">nonce</span><span class="o">:</span> <span class="n">currentNonce</span> <span class="c1">// Current nonce for this project/token/spender </span> <span class="p">}),</span> <span class="n">spender</span><span class="o">:</span> <span class="kt">address</span><span class="p">(</span><span class="n">bugBountyContract</span><span class="p">),</span> <span class="c1">// Your contract address </span> <span class="n">sigDeadline</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">1</span> <span class="kc">hours</span> <span class="c1">// Signature must be used within 1 hour </span><span class="p">});</span> <span class="c1">// 2. Project team signs the permit (off-chain, no gas) </span><span class="kt">bytes</span> <span class="k">memory</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">signPermit</span><span class="p">(</span><span class="n">permit</span><span class="p">,</span> <span class="n">projectTeamPrivateKey</span><span class="p">);</span> <span class="c1">// 3. Anyone can submit the signed permit to grant permission </span><span class="n">permit2</span><span class="p">.</span><span class="n">permit</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">permit</span><span class="p">,</span> <span class="n">signature</span><span class="p">);</span> </code></pre></div></div> <h4 id="allowancetransfer-eip-712-implementation">AllowanceTransfer EIP-712 Implementation</h4> <p>AllowanceTransfer uses specific EIP-712 structures for signature verification:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Type hashes used internally by permit2 </span><span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">PERMIT_DETAILS_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"PermitDetails(address token,uint160 amount,uint48 expiration,uint48 nonce)"</span> <span class="p">);</span> <span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">PERMIT_SINGLE_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"PermitSingle(PermitDetails details,address spender,uint256 sigDeadline)PermitDetails(address token,uint160 amount,uint48 expiration,uint48 nonce)"</span> <span class="p">);</span> <span class="c1">// Your signature generation for AllowanceTransfer </span><span class="k">function</span> <span class="n">generateAllowanceSignature</span><span class="p">(</span> <span class="n">PermitSingle</span> <span class="k">memory</span> <span class="n">permit</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">privateKey</span> <span class="p">)</span> <span class="k">internal</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes</span> <span class="k">memory</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Hash the PermitDetails struct </span> <span class="kt">bytes32</span> <span class="n">detailsHash</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">PERMIT_DETAILS_TYPEHASH</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">details</span><span class="p">.</span><span class="n">token</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">details</span><span class="p">.</span><span class="n">amount</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">details</span><span class="p">.</span><span class="n">expiration</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">details</span><span class="p">.</span><span class="n">nonce</span> <span class="p">));</span> <span class="c1">// Hash the main PermitSingle struct </span> <span class="kt">bytes32</span> <span class="n">structHash</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">PERMIT_SINGLE_TYPEHASH</span><span class="p">,</span> <span class="n">detailsHash</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">spender</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">sigDeadline</span> <span class="p">));</span> <span class="c1">// Create final EIP-712 hash </span> <span class="kt">bytes32</span> <span class="n">hash</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span> <span class="s">"</span><span class="se">\x19\x01</span><span class="s">"</span><span class="p">,</span> <span class="n">permit2</span><span class="p">.</span><span class="n">DOMAIN_SEPARATOR</span><span class="p">(),</span> <span class="n">structHash</span> <span class="p">));</span> <span class="c1">// Sign and return </span> <span class="p">(</span><span class="kt">uint8</span> <span class="n">v</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">r</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">s</span><span class="p">)</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">privateKey</span><span class="p">,</span> <span class="n">hash</span><span class="p">);</span> <span class="k">return</span> <span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span> <span class="p">}</span> </code></pre></div></div> <h4 id="using-allowancetransfer-in-your-bug-bounty-contract">Using AllowanceTransfer in Your Bug Bounty Contract</h4> <p>Once permission is granted by a project team, your contract can transfer tokens to researchers using the familiar pattern:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">contract</span> <span class="n">BugBountyPlatform</span> <span class="p">{</span> <span class="n">IPermit2</span> <span class="k">public</span> <span class="k">constant</span> <span class="n">PERMIT2</span> <span class="o">=</span> <span class="n">IPermit2</span><span class="p">(</span><span class="mh">0x000000000022D473030F116dDEE9F6B43aC78BA3</span><span class="p">);</span> <span class="k">function</span> <span class="n">processRecurringBountyPayment</span><span class="p">(</span> <span class="kt">address</span> <span class="n">projectTeam</span><span class="p">,</span> <span class="kt">address</span> <span class="n">researcher</span><span class="p">,</span> <span class="kt">address</span> <span class="n">token</span><span class="p">,</span> <span class="kt">uint160</span> <span class="n">amount</span><span class="p">,</span> <span class="kt">string</span> <span class="k">calldata</span> <span class="n">bugId</span> <span class="p">)</span> <span class="k">external</span> <span class="n">onlyAdmin</span> <span class="p">{</span> <span class="c1">// Verify this project has valid permissions and researcher is eligible </span> <span class="nb">require</span><span class="p">(</span><span class="n">authorizedProjects</span><span class="p">[</span><span class="n">projectTeam</span><span class="p">],</span> <span class="s">"Project not authorized"</span><span class="p">);</span> <span class="nb">require</span><span class="p">(</span><span class="n">verifiedResearchers</span><span class="p">[</span><span class="n">researcher</span><span class="p">],</span> <span class="s">"Researcher not verified"</span><span class="p">);</span> <span class="nb">require</span><span class="p">(</span><span class="o">!</span><span class="n">processedBugs</span><span class="p">[</span><span class="n">bugId</span><span class="p">],</span> <span class="s">"Bug already processed"</span><span class="p">);</span> <span class="c1">// Transfer tokens using existing AllowanceTransfer permission </span> <span class="c1">// This will deduct from the project team's granted allowance </span> <span class="n">PERMIT2</span><span class="p">.</span><span class="n">transferFrom</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">researcher</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">token</span><span class="p">);</span> <span class="n">processedBugs</span><span class="p">[</span><span class="n">bugId</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="k">emit</span> <span class="n">BountyPaid</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">researcher</span><span class="p">,</span> <span class="n">bugId</span><span class="p">,</span> <span class="n">amount</span><span class="p">);</span> <span class="p">}</span> <span class="c1">// Batch processing for multiple researcher payments </span> <span class="k">function</span> <span class="n">processBatchBountyPayments</span><span class="p">(</span> <span class="n">IAllowanceTransfer</span><span class="p">.</span><span class="n">AllowanceTransferDetails</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">transfers</span> <span class="p">)</span> <span class="k">external</span> <span class="n">onlyAdmin</span> <span class="p">{</span> <span class="n">PERMIT2</span><span class="p">.</span><span class="n">transferFrom</span><span class="p">(</span><span class="n">transfers</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span> </code></pre></div></div> <h4 id="ordered-nonce-management-in-allowancetransfer">Ordered Nonce Management in AllowanceTransfer</h4> <p>AllowanceTransfer uses ordered (sequential) nonces for each owner/token/spender combination:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Nonces must be used in order: 0, 1, 2, 3, ... // If nonce 2 is used, nonces 0 and 1 become invalid </span> <span class="k">function</span> <span class="n">getCurrentNonce</span><span class="p">(</span><span class="kt">address</span> <span class="n">projectTeam</span><span class="p">,</span> <span class="kt">address</span> <span class="n">token</span><span class="p">,</span> <span class="kt">address</span> <span class="n">spender</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint48</span> <span class="n">nonce</span><span class="p">)</span> <span class="p">{</span> <span class="p">(,</span> <span class="p">,</span> <span class="n">nonce</span><span class="p">)</span> <span class="o">=</span> <span class="n">permit2</span><span class="p">.</span><span class="n">allowance</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">spender</span><span class="p">);</span> <span class="p">}</span> <span class="c1">// Project teams can invalidate future nonces if their key is compromised </span><span class="k">function</span> <span class="n">invalidateFutureNonces</span><span class="p">(</span><span class="kt">address</span> <span class="n">token</span><span class="p">,</span> <span class="kt">address</span> <span class="n">spender</span><span class="p">,</span> <span class="kt">uint48</span> <span class="n">newNonce</span><span class="p">)</span> <span class="k">external</span> <span class="p">{</span> <span class="n">permit2</span><span class="p">.</span><span class="n">invalidateNonces</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">spender</span><span class="p">,</span> <span class="n">newNonce</span><span class="p">);</span> <span class="p">}</span> </code></pre></div></div> <h3 id="signaturetransfer-direct-one-time-transfers">SignatureTransfer: Direct One-Time Transfers</h3> <p>SignatureTransfer enables direct token transfers without pre-existing approvals. Each signature authorizes a specific transfer amount to specific recipients.</p> <h4 id="core-data-structures-1">Core Data Structures</h4> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">TokenPermissions</span> <span class="p">{</span> <span class="kt">address</span> <span class="n">token</span><span class="p">;</span> <span class="c1">// The ERC20 token to transfer </span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">;</span> <span class="c1">// Exact amount to transfer </span><span class="p">}</span> <span class="k">struct</span> <span class="n">PermitTransferFrom</span> <span class="p">{</span> <span class="n">TokenPermissions</span> <span class="n">permitted</span><span class="p">;</span> <span class="c1">// Token and amount details </span> <span class="kt">uint256</span> <span class="n">nonce</span><span class="p">;</span> <span class="c1">// Unordered nonce for replay protection </span> <span class="kt">uint256</span> <span class="n">deadline</span><span class="p">;</span> <span class="c1">// Transfer must occur before this time </span><span class="p">}</span> <span class="k">struct</span> <span class="n">SignatureTransferDetails</span> <span class="p">{</span> <span class="kt">address</span> <span class="n">to</span><span class="p">;</span> <span class="c1">// Transfer recipient </span> <span class="kt">uint256</span> <span class="n">requestedAmount</span><span class="p">;</span> <span class="c1">// Amount to actually transfer (≤ permitted amount) </span><span class="p">}</span> </code></pre></div></div> <h4 id="how-signaturetransfer-works">How SignatureTransfer Works</h4> <p>Unlike AllowanceTransfer, SignatureTransfer doesn’t store any state. Each signature is self-contained and authorizes a direct transfer:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Project team signs permission for a specific bounty payment to a researcher </span><span class="n">PermitTransferFrom</span> <span class="k">memory</span> <span class="n">permit</span> <span class="o">=</span> <span class="n">PermitTransferFrom</span><span class="p">({</span> <span class="n">permitted</span><span class="o">:</span> <span class="n">TokenPermissions</span><span class="p">({</span> <span class="n">token</span><span class="o">:</span> <span class="kt">address</span><span class="p">(</span><span class="n">USDC</span><span class="p">),</span> <span class="n">amount</span><span class="o">:</span> <span class="mi">5000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span> <span class="c1">// Exactly 5,000 USDC </span> <span class="p">}),</span> <span class="n">nonce</span><span class="o">:</span> <span class="mi">12345678901234567890</span><span class="p">,</span> <span class="c1">// Unordered nonce </span> <span class="n">deadline</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">1</span> <span class="kc">hours</span> <span class="p">});</span> <span class="n">SignatureTransferDetails</span> <span class="k">memory</span> <span class="n">transferDetails</span> <span class="o">=</span> <span class="n">SignatureTransferDetails</span><span class="p">({</span> <span class="n">to</span><span class="o">:</span> <span class="n">researcher</span><span class="p">,</span> <span class="c1">// Researcher receives the bounty </span> <span class="n">requestedAmount</span><span class="o">:</span> <span class="mi">5000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span> <span class="c1">// Can be ≤ permitted amount </span><span class="p">});</span> <span class="c1">// Generate signature (covered in detail in Section 1) </span><span class="kt">bytes</span> <span class="k">memory</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">generateSignatureTransferSignature</span><span class="p">(</span><span class="n">permit</span><span class="p">,</span> <span class="n">projectTeamPrivateKey</span><span class="p">);</span> <span class="c1">// Execute the transfer in one call, no pre-existing approvals needed </span><span class="n">permit2</span><span class="p">.</span><span class="n">permitTransferFrom</span><span class="p">(</span><span class="n">permit</span><span class="p">,</span> <span class="n">transferDetails</span><span class="p">,</span> <span class="n">projectTeam</span><span class="p">,</span> <span class="n">signature</span><span class="p">);</span> </code></pre></div></div> <h4 id="signaturetransfer-eip-712-implementation">SignatureTransfer EIP-712 Implementation</h4> <p>SignatureTransfer has its own EIP-712 structures optimized for direct transfers:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Type hashes used internally by permit2 </span><span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">TOKEN_PERMISSIONS_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"TokenPermissions(address token,uint256 amount)"</span> <span class="p">);</span> <span class="kt">bytes32</span> <span class="k">constant</span> <span class="n">PERMIT_TRANSFER_FROM_TYPEHASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"PermitTransferFrom(TokenPermissions permitted,address spender,uint256 nonce,uint256 deadline)TokenPermissions(address token,uint256 amount)"</span> <span class="p">);</span> <span class="c1">// Your signature generation for SignatureTransfer </span><span class="k">function</span> <span class="n">generateSignatureTransferSignature</span><span class="p">(</span> <span class="n">PermitTransferFrom</span> <span class="k">memory</span> <span class="n">permit</span><span class="p">,</span> <span class="kt">address</span> <span class="n">spender</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">privateKey</span> <span class="p">)</span> <span class="k">internal</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes</span> <span class="k">memory</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Hash TokenPermissions </span> <span class="kt">bytes32</span> <span class="n">tokenPermissionsHash</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">TOKEN_PERMISSIONS_TYPEHASH</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">permitted</span><span class="p">.</span><span class="n">token</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">permitted</span><span class="p">.</span><span class="n">amount</span> <span class="p">));</span> <span class="c1">// Hash PermitTransferFrom </span> <span class="kt">bytes32</span> <span class="n">structHash</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span> <span class="n">PERMIT_TRANSFER_FROM_TYPEHASH</span><span class="p">,</span> <span class="n">tokenPermissionsHash</span><span class="p">,</span> <span class="n">spender</span><span class="p">,</span> <span class="c1">// Your contract address </span> <span class="n">permit</span><span class="p">.</span><span class="n">nonce</span><span class="p">,</span> <span class="n">permit</span><span class="p">.</span><span class="n">deadline</span> <span class="p">));</span> <span class="c1">// Create final EIP-712 hash </span> <span class="kt">bytes32</span> <span class="n">hash</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span> <span class="s">"</span><span class="se">\x19\x01</span><span class="s">"</span><span class="p">,</span> <span class="n">permit2</span><span class="p">.</span><span class="n">DOMAIN_SEPARATOR</span><span class="p">(),</span> <span class="n">structHash</span> <span class="p">));</span> <span class="c1">// Sign and return </span> <span class="p">(</span><span class="kt">uint8</span> <span class="n">v</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">r</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">s</span><span class="p">)</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">privateKey</span><span class="p">,</span> <span class="n">hash</span><span class="p">);</span> <span class="k">return</span> <span class="n">abi</span><span class="p">.</span><span class="n">encodePacked</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span> <span class="p">}</span> </code></pre></div></div> <h4 id="unordered-nonce-management-in-signaturetransfer">Unordered Nonce Management in SignatureTransfer</h4> <p>SignatureTransfer uses a sophisticated bitmap-based nonce system that allows signatures to be used in any order:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Nonces are 256-bit values where: // - First 248 bits = word position in the bitmap // - Last 8 bits = bit position within that word </span> <span class="k">mapping</span><span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="k">mapping</span><span class="p">(</span><span class="kt">uint256</span> <span class="o">=&gt;</span> <span class="kt">uint256</span><span class="p">))</span> <span class="k">public</span> <span class="n">nonceBitmap</span><span class="p">;</span> <span class="k">function</span> <span class="n">bitmapPositions</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">nonce</span><span class="p">)</span> <span class="k">private</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span> <span class="n">wordPos</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">bitPos</span><span class="p">)</span> <span class="p">{</span> <span class="n">wordPos</span> <span class="o">=</span> <span class="kt">uint248</span><span class="p">(</span><span class="n">nonce</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">);</span> <span class="c1">// First 248 bits </span> <span class="n">bitPos</span> <span class="o">=</span> <span class="kt">uint8</span><span class="p">(</span><span class="n">nonce</span><span class="p">);</span> <span class="c1">// Last 8 bits </span><span class="p">}</span> <span class="c1">// Project teams can invalidate specific nonces using a bitmask </span><span class="k">function</span> <span class="n">invalidateUnorderedNonces</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">wordPos</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">mask</span><span class="p">)</span> <span class="k">external</span> <span class="p">{</span> <span class="n">nonceBitmap</span><span class="p">[</span><span class="n">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">][</span><span class="n">wordPos</span><span class="p">]</span> <span class="o">|=</span> <span class="n">mask</span><span class="p">;</span> <span class="p">}</span> </code></pre></div></div> <p>This system provides incredible flexibility - project teams can:</p> <ul> <li>Use signatures in any order</li> <li>Invalidate specific ranges of nonces</li> <li>Generate nonces with custom strategies</li> </ul> <h3 id="batch-operations-maximum-efficiency">Batch Operations: Maximum Efficiency</h3> <p>Both systems support batching to minimize gas costs and enable complex operations:</p> <h4 id="allowancetransfer-batch">AllowanceTransfer Batch</h4> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Project team grants permissions for multiple token bounty pools in one transaction </span><span class="n">IAllowanceTransfer</span><span class="p">.</span><span class="n">PermitBatch</span> <span class="k">memory</span> <span class="n">batchPermit</span> <span class="o">=</span> <span class="n">IAllowanceTransfer</span><span class="p">.</span><span class="n">PermitBatch</span><span class="p">({</span> <span class="n">details</span><span class="o">:</span> <span class="p">[</span> <span class="n">IAllowanceTransfer</span><span class="p">.</span><span class="n">PermitDetails</span><span class="p">({</span> <span class="n">token</span><span class="o">:</span> <span class="kt">address</span><span class="p">(</span><span class="n">USDC</span><span class="p">),</span> <span class="n">amount</span><span class="o">:</span> <span class="mi">10000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="n">expiration</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">30</span> <span class="kc">days</span><span class="p">,</span> <span class="n">nonce</span><span class="o">:</span> <span class="n">getCurrentNonce</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">USDC</span><span class="p">,</span> <span class="kt">address</span><span class="p">(</span><span class="nb">this</span><span class="p">))</span> <span class="p">}),</span> <span class="n">IAllowanceTransfer</span><span class="p">.</span><span class="n">PermitDetails</span><span class="p">({</span> <span class="n">token</span><span class="o">:</span> <span class="kt">address</span><span class="p">(</span><span class="n">DAI</span><span class="p">),</span> <span class="n">amount</span><span class="o">:</span> <span class="mi">5000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">18</span><span class="p">,</span> <span class="n">expiration</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">30</span> <span class="kc">days</span><span class="p">,</span> <span class="n">nonce</span><span class="o">:</span> <span class="n">getCurrentNonce</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">DAI</span><span class="p">,</span> <span class="kt">address</span><span class="p">(</span><span class="nb">this</span><span class="p">))</span> <span class="p">})</span> <span class="p">],</span> <span class="n">spender</span><span class="o">:</span> <span class="kt">address</span><span class="p">(</span><span class="nb">this</span><span class="p">),</span> <span class="n">sigDeadline</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">1</span> <span class="kc">hours</span> <span class="p">});</span> <span class="c1">// Single signature grants permissions for multiple token bounty pools </span><span class="n">permit2</span><span class="p">.</span><span class="n">permit</span><span class="p">(</span><span class="n">projectTeam</span><span class="p">,</span> <span class="n">batchPermit</span><span class="p">,</span> <span class="n">signature</span><span class="p">);</span> </code></pre></div></div> <h4 id="signaturetransfer-batch">SignatureTransfer Batch</h4> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Project team authorizes bounty payments to multiple researchers in one transaction </span><span class="n">ISignatureTransfer</span><span class="p">.</span><span class="n">PermitBatchTransferFrom</span> <span class="k">memory</span> <span class="n">batchPermit</span> <span class="o">=</span> <span class="n">ISignatureTransfer</span><span class="p">.</span><span class="n">PermitBatchTransferFrom</span><span class="p">({</span> <span class="n">permitted</span><span class="o">:</span> <span class="p">[</span> <span class="n">ISignatureTransfer</span><span class="p">.</span><span class="n">TokenPermissions</span><span class="p">({</span><span class="n">token</span><span class="o">:</span> <span class="kt">address</span><span class="p">(</span><span class="n">USDC</span><span class="p">),</span> <span class="n">amount</span><span class="o">:</span> <span class="mi">5000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">}),</span> <span class="n">ISignatureTransfer</span><span class="p">.</span><span class="n">TokenPermissions</span><span class="p">({</span><span class="n">token</span><span class="o">:</span> <span class="kt">address</span><span class="p">(</span><span class="n">DAI</span><span class="p">),</span> <span class="n">amount</span><span class="o">:</span> <span class="mi">3000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">18</span><span class="p">})</span> <span class="p">],</span> <span class="n">nonce</span><span class="o">:</span> <span class="n">generateUnorderedNonce</span><span class="p">(),</span> <span class="n">deadline</span><span class="o">:</span> <span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">+</span> <span class="mi">1</span> <span class="kc">hours</span> <span class="p">});</span> <span class="n">ISignatureTransfer</span><span class="p">.</span><span class="n">SignatureTransferDetails</span><span class="p">[]</span> <span class="k">memory</span> <span class="n">transferDetails</span> <span class="o">=</span> <span class="p">[</span> <span class="n">ISignatureTransfer</span><span class="p">.</span><span class="n">SignatureTransferDetails</span><span class="p">({</span><span class="n">to</span><span class="o">:</span> <span class="n">researcherA</span><span class="p">,</span> <span class="n">requestedAmount</span><span class="o">:</span> <span class="mi">5000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">}),</span> <span class="n">ISignatureTransfer</span><span class="p">.</span><span class="n">SignatureTransferDetails</span><span class="p">({</span><span class="n">to</span><span class="o">:</span> <span class="n">researcherB</span><span class="p">,</span> <span class="n">requestedAmount</span><span class="o">:</span> <span class="mi">3000</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">18</span><span class="p">})</span> <span class="p">];</span> <span class="c1">// Single signature authorizes multiple bounty payments to different researchers </span><span class="n">permit2</span><span class="p">.</span><span class="n">permitTransferFrom</span><span class="p">(</span><span class="n">batchPermit</span><span class="p">,</span> <span class="n">transferDetails</span><span class="p">,</span> <span class="n">projectTeam</span><span class="p">,</span> <span class="n">signature</span><span class="p">);</span> </code></pre></div></div> <h3 id="permit2s-eip-712-domain-setup">Permit2’s EIP-712 Domain Setup</h3> <p>Permit2 uses a carefully designed EIP-712 domain that’s consistent across all chains:</p> <div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">contract</span> <span class="n">EIP712</span> <span class="k">is</span> <span class="n">IEIP712</span> <span class="p">{</span> <span class="kt">bytes32</span> <span class="k">private</span> <span class="k">constant</span> <span class="n">_HASHED_NAME</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span><span class="s">"Permit2"</span><span class="p">);</span> <span class="kt">bytes32</span> <span class="k">private</span> <span class="k">constant</span> <span class="n">_TYPE_HASH</span> <span class="o">=</span> <span class="nb">keccak256</span><span class="p">(</span> <span class="s">"EIP712Domain(string name,uint256 chainId,address verifyingContract)"</span> <span class="p">);</span> <span class="c1">// Domain separator is cached but recalculated if chain ID changes (for forks) </span> <span class="k">function</span> <span class="n">DOMAIN_SEPARATOR</span><span class="p">()</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">block</span><span class="p">.</span><span class="n">chainid</span> <span class="o">==</span> <span class="n">_CACHED_CHAIN_ID</span> <span class="o">?</span> <span class="n">_CACHED_DOMAIN_SEPARATOR</span> <span class="o">:</span> <span class="n">_buildDomainSeparator</span><span class="p">(</span><span class="n">_TYPE_HASH</span><span class="p">,</span> <span class="n">_HASHED_NAME</span><span class="p">);</span> <span class="p">}</span> <span class="k">function</span> <span class="n">_buildDomainSeparator</span><span class="p">(</span><span class="kt">bytes32</span> <span class="n">typeHash</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">nameHash</span><span class="p">)</span> <span class="k">private</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">keccak256</span><span class="p">(</span><span class="n">abi</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">typeHash</span><span class="p">,</span> <span class="n">nameHash</span><span class="p">,</span> <span class="n">block</span><span class="p">.</span><span class="n">chainid</span><span class="p">,</span> <span class="kt">address</span><span class="p">(</span><span class="nb">this</span><span class="p">)));</span> <span class="p">}</span> <span class="p">}</span> </code></pre></div></div> <p>This setup ensures:</p> <ul> <li> <strong>Cross-chain consistency</strong>: Same permit2 address and domain on all chains</li> <li> <strong>Fork protection</strong>: Domain separator updates automatically on...
            
            <br>
            <a href="/articles/eip-712-and-permit2-a-developer-s-guide"><strong>See more</strong></a>  
            
          </div>
          </div>
          
  </article>  
  
  </main>

  
<br>

	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> Oct 25, 2022</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/table-test">
        <div class="title">
        <h1 class="title-text">Table test</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <p><br></p>

<table>
  <thead>
    <tr>
      <th>You can</th>
      <th>create a</th>
      <th>simple table</th>
      <th>like this.</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>an image</td>
      <td>&lt;p&gt;<span class="embed-image-wrapper"><img class="embed-image" src="/assets/attachments/Screen%20Shot%202022-10-24%20at%203.36.00%20am.png"></span>&lt;/p&gt;</td>
      <td>extends the table</td>
      <td>vertically.</td>
    </tr>
    <tr>
      <td>A pipe</td>
      <td>extends the table</td>
      <td>laterally.</td>
      <td> </td>
    </tr>
  </tbody>
</table>


            
          </div>
          </div>
          
  </article>  
  
  </main>

  
<br>

	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> Sep 26, 2022</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/configure-exocore-for-personal-use">
        <div class="title">
        <h1 class="title-text">Configure Exocore for Personal Use</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <h2 id="change-your-username-and-homepage">Change your Username and Homepage</h2>
<p>Navigate to <code class="language-plaintext highlighter-rouge">/exocore/data/user.yml</code>. Open the file in any text-editor (e.g. Notepad or TextEdit) and look for <code class="language-plaintext highlighter-rouge">user_name: Remilia Corporation</code>. Change this to whatever name you want to appear on the left sidebar.</p>

<h2 id="change-your-homepage-content">Change your Homepage Content</h2>

<p>In the same <code class="language-plaintext highlighter-rouge">/exocore/data/user.yml</code> file, you will also see <code class="language-plaintext highlighter-rouge">welcome_header</code> and <code class="language-plaintext highlighter-rouge">welcome_subtitle</code>. These control the title and subtitle that appear on your homepage.</p>

<p>On the root folder you will find <code class="language-plaintext highlighter-rouge">index.md</code>, this can be edited like any other article as your homepage with the addition of the title and header from the <code class="language-plaintext highlighter-rouge">user.yml</code> file. Make sure you keep the following frontmatter at the top of the markdown file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: home
title: home
---
</code></pre></div></div>

<h2 id="change-your-profile-picture">Change your Profile Picture</h2>

<p>The profile picture that appears on the left sidebar is located at <code class="language-plaintext highlighter-rouge">assets/img/pfp.png</code>, you can replace this file with any .png. Note that it will be resized into a square.</p>

<h2 id="change-your-social-media-card-image">Change your Social Media Card Image</h2>
<p>The social media card that appears when your site is linked on social media sites like Twitter, Facebook, etc. is located at <code class="language-plaintext highlighter-rouge">assets/img/card.png</code>, you can replace this file with any .png. Note that a dimension of 1200x630 is recommended.</p>

<p>Make sure the site’s url is changed in <code class="language-plaintext highlighter-rouge">/_config.yml</code> in the next step for this image to appear.</p>

<h2 id="change-your-sites-title-and-url">Change your Site’s Title and URL</h2>
<p>Navigate to <code class="language-plaintext highlighter-rouge">/_config.yml</code> to change the Title and URL of your exocore. All other settings can be left as is.</p>

<h2 id="change-the-theme">Change the Theme</h2>
<p>The Exocore ships with multiple themes to choose from. Navigate to <code class="language-plaintext highlighter-rouge">/styles.scss</code> and look for the line that says <code class="language-plaintext highlighter-rouge">//Uncomment one of the following lines to choose a theme:</code>. To select a theme, remove <code class="language-plaintext highlighter-rouge">//</code> from the line of the theme you want to try, and add <code class="language-plaintext highlighter-rouge">//</code> to the previously active theme (“yotsuba” by default).</p>

<h2 id="optional-password-protection">Optional: Password Protection</h2>

<p>You can add simple password protection by going to your Netlify account, entering your site, going to <code class="language-plaintext highlighter-rouge">Settings &gt; Build &amp; Deploy &gt; Build Settings &gt; Edit Settings</code> and changing <code class="language-plaintext highlighter-rouge">Build commannd</code> from the default <code class="language-plaintext highlighter-rouge">bundle exec jekyll build</code> to: 
<code class="language-plaintext highlighter-rouge">jekyll build &amp;&amp; npx staticrypt _site/index.html P@SSW0RD -o _site/index.html</code></p>

<p>This will password protect the homepage with <code class="language-plaintext highlighter-rouge">P@SSWORD</code> as the password – you can change this to anything you’d like. Note that this will only protect the homepage, users will be able to directly link to any other page and have access to the whole site.</p>

<hr>

<p>Move on to <a class="wiki-link" href="/articles/using-your-exocore">using your exocore</a> for further guidance.</p>

            
          </div>
          </div>
          
          <hr>
          <div class="backlinks-container">
            <side>
              <h1>Interlinked Pages</h1>
                  
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/writing-with-exocore-syntax"><b>Writing with Exocore Syntax</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
            </side>
          </div>
          
  </article>  
  
  </main>

  
<br>

	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> May 08, 2022</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/exocore-installation-instructions">
        <div class="title">
        <h1 class="title-text">Exocore Installation Instructions</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <p>You can set up a personal website as a public <a class="wiki-link" href="/articles/exocore-executive-summary">exocortex</a> with no code in this 15 minute guide, using entirely free services to host your site on the web.</p>

<p>All pages are converted from simple, non-code <a class="wiki-link" href="/articles/writing-with-exocore-syntax">Markdown syntax</a>, so you can focus purely on writing. The end result will look identical to this page.</p>

<h2 id="background">Background</h2>

<p>Github will be used as a cloud content management system - it’s convenient to upload updates to, accessible and editable from anywhere, and keeps full version history of changes as well as provides easy options for back-up.</p>

<p>Netlify will be used to deploy the files stored on Github as a web-server - it’s fast and automatically updates whenever an update is made on your Github repository. Github does offer its own static webhost, but Netlify is necessary due to certain plugin support limitations.</p>

<p>Netlify will also provide your site a custom subdomain, e.g. <code class="language-plaintext highlighter-rouge">[site-name].netlify.app</code>. You can also use your own purchased domain.</p>

<p>All services are entirely free besides the custom domain.</p>

<h2 id="deploy-your-own-exocore-to-the-web">Deploy your own Exocore to the Web</h2>

<h3 id="create-github-account">Create Github Account</h3>

<p>First, create an account on <a href="https://github.com/join" class="web-link">github.com</a> if you do not already have one. Remember to <a href="https://saraford.net/2017/02/19/how-to-hide-your-email-address-in-your-git-commits-but-still-get-contributions-to-show-up-on-your-github-profile-050/" class="web-link">make your email private</a> in settings.</p>

<p>Continue below when you have an account ready.</p>

<h3 id="install-the-exocore-template-to-github-and-netlify">Install the Exocore template to GitHub and Netlify</h3>

<p>Open our <a href="https://app.netlify.com/start/deploy?repository=https://github.com/remiliacorp/exocore" class="web-link">One-click installation</a>.</p>

<p>Steps:</p>
<ol>
  <li>Select <code class="language-plaintext highlighter-rouge">Connect to Github</code>
</li>
  <li>Login to Github and select <code class="language-plaintext highlighter-rouge">Authorize Application</code>
</li>
  <li>Name your repository - this is your own reference</li>
  <li>Select <code class="language-plaintext highlighter-rouge">Deploy site</code>
</li>
</ol>

<p>Netlify will now take about 5 minutes for the initial build of the site. If you want, you can watch the status of the build by clicking <code class="language-plaintext highlighter-rouge">Production: master@HEAD</code> under <strong>Production Deploys</strong>.</p>

<p>Once it’s complete, the Production status will change to <strong>Published</strong>, and you will be able to click the <code class="language-plaintext highlighter-rouge">[site-name].netlify.app</code> link to see your site.</p>

<p>The site’s master files will also appear in your Github account, under the repository name you selected, e.g. <code class="language-plaintext highlighter-rouge">github.com/account-name/repository-name</code>. Changes here will go live on the site automatically.</p>

<p>Your site is now officially live, available for anyone to view at <code class="language-plaintext highlighter-rouge">[site-name].netlify.app.</code>, but there are some settings we should adjust before moving forward.</p>

<h3 id="change-your-site-name">Change your site name</h3>

<p>Change the default generated site name to whatever you’d like by navigating to <code class="language-plaintext highlighter-rouge">Site settings &gt; Site details &gt; Change site name</code>. It will be available at <code class="language-plaintext highlighter-rouge">[sitename].netlify.app</code></p>

<p>Optionally, you can find instructions for setting up a custom domain <span class="invalid-wiki-link">[[here|custom domain]]</span>.</p>

<h2 id="clone-your-repo-and-set-to-ssh">Clone your repo and set to ssh</h2>
<p>First, download <a href="https://desktop.github.com/" class="web-link">Github Desktop</a> if you don’t already have it.</p>

<p>Open the program and follow the instructions to sign in to your Github account then click <code class="language-plaintext highlighter-rouge">Current Repository</code> at the top left, then <code class="language-plaintext highlighter-rouge">Add &gt; Clone Repository...</code></p>

<p>Now enter <code class="language-plaintext highlighter-rouge">git@github.com:yourusername/reponame.git</code> replacing your github username and repo name, e.g. <code class="language-plaintext highlighter-rouge">git@github.com:remiliacorp/exocore.git</code>, and where you want to store your exocore (if you want to edit on mobile this will need to be on a cloud drive like iCloud, see <span class="invalid-wiki-link">[<a href="Exocore%20Installation%20Instructions" title="Exocore Installation Instructions" class="web-link">Exocore Installation Instructions#Optional Setup Mobile Editing|7. Setup Mobile Editing</a>]</span>)</p>

<p><span class="embed-image-wrapper"><img class="embed-image" src="/assets/attachments/Screen%20Shot%202022-09-19%20at%207.06.31%20PM.png"></span></p>

<h3 id="change-repo-to-ssh">Change repo to ssh</h3>
<p>If you’ve already cloned your repo before, you’ll need to make sure it’s set to ssh, not https. If you haven’t, continue onto <a class="wiki-link" href="/articles/exocore-installation-instructions#setup-ssh-with-github">Setup SSH with Github</a></p>

<p>Navigate to the repo on Github Desktop, then click <code class="language-plaintext highlighter-rouge">Repository &gt; Repository Settings</code> in the menu bar.</p>

<p>If the <code class="language-plaintext highlighter-rouge">Primary remote repository (origin)</code> begins with <code class="language-plaintext highlighter-rouge">git@github.com:</code> you’re on ssh already and don’t need to do anything. If it begins with <code class="language-plaintext highlighter-rouge">https://github.com/</code> simply replace that excerpt with <code class="language-plaintext highlighter-rouge">git@github.com:</code>.</p>

<p>eg <code class="language-plaintext highlighter-rouge">https://github.com/remiliacorp/exocore.git</code> becomes <code class="language-plaintext highlighter-rouge">git@github.com:remiliacorp/exocore.git</code></p>
<h2 id="setup-ssh-with-github">Setup SSH with Github</h2>
<p>If you don’t already have an SSH Key, you’ll need to make one to add to Github. If you do move directly to <span class="invalid-wiki-link"><span class="invalid-wiki-link">[[Using Exocore on Obsidian#Add SSH Public Key to your Github|Add SSH Public Key to your Github]]</span></span>. If you’re not sure, you can run <code class="language-plaintext highlighter-rouge">ls -al ~/.ssh</code> in Terminal to check, if you see <code class="language-plaintext highlighter-rouge">id_rsa</code> and <code class="language-plaintext highlighter-rouge">id_rsa.pub</code> you can continue to <span class="invalid-wiki-link"><span class="invalid-wiki-link">[[Using Exocore on Obsidian#Add SSH Public Key to your Github|Add SSH Public Key to your Github]]</span></span>.</p>

<h3 id="generate-ssh-key">Generate SSH Key</h3>

<ol>
  <li>
    <p>Open Terminal on OSX or Linux (<a href="https://gitforwindows.org/" class="web-link">Git Bash</a> on Windows).</p>
  </li>
  <li>
    <p>Paste the text below, substituting in your GitHub email address:
<code class="language-plaintext highlighter-rouge">ssh-keygen -t rsa -b 4096 -C "your_email@example.com"</code></p>
  </li>
</ol>

<p>This creates a new SSH key, using the provided email as a label. <br>
 <code class="language-plaintext highlighter-rouge">&gt; Generating public/private algorithm key pair.</code></p>

<ol>
  <li>
    <p>When you’re prompted to “Enter a file in which to save the key,” press Enter. This accepts the default file location.
<code class="language-plaintext highlighter-rouge">Enter a file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]</code></p>
  </li>
  <li>
    <p>At the prompt, type a password that you’ll remember.</p>
  </li>
</ol>

<p><code class="language-plaintext highlighter-rouge">Enter passphrase (empty for no passphrase): [Type a passphrase]</code>
<code class="language-plaintext highlighter-rouge">Enter same passphrase again: [Type passphrase again]</code></p>

<h3 id="add-ssh-private-key-to-the-ssh-agent">Add SSH Private Key to the ssh-agent</h3>

<ol>
  <li>Ensure the ssh-agent is running.</li>
</ol>

<p><code class="language-plaintext highlighter-rouge">$ eval "$(ssh-agent -s)"</code></p>

<p>You will see an output that looks something like:</p>

<p><code class="language-plaintext highlighter-rouge">Agent pid XXXXX</code></p>

<ol>
  <li>Next, add your SSH private key to the ssh-agent.</li>
</ol>

<p><code class="language-plaintext highlighter-rouge">ssh-add ~/.ssh/id_rsa</code></p>

<h3 id="add-ssh-public-key-to-your-github">Add SSH Public Key to your Github</h3>

<ol>
  <li>Copy your SSH public key to your clipboard.</li>
</ol>

<p>OSX/Linux: <code class="language-plaintext highlighter-rouge">pbcopy &lt; ~/.ssh/id_rsa.pub</code></p>

<p>Windows (Git Bash): <code class="language-plaintext highlighter-rouge">cat ~/.ssh/id_rsa.pub | clip</code></p>

<ol>
  <li>Login on Github and click your profile photo, then click <strong>Settings</strong>.</li>
</ol>
<p><span class="embed-image-wrapper"><img class="embed-image" src="/assets/attachments/Pasted%20image%2020220905145243.png"></span></p>

<ol>
  <li>In the “Access” section of the sidebar, click  <strong>SSH and GPG keys</strong>.</li>
  <li>Click <strong>New SSH key</strong> or <strong>Add SSH key</strong>.</li>
</ol>
<p><span class="embed-image-wrapper"><img class="embed-image" src="/assets/attachments/Pasted%20image%2020220905145302.png"></span></p>

<ol>
  <li>Give it a Title. Under Key type select: Authentication.</li>
  <li>Past the key into the “Key” field and click add ssh key</li>
</ol>
<p><span class="embed-image-wrapper"><img class="embed-image" src="/assets/attachments/Pasted%20image%2020220905145417.png"></span></p>

<h2 id="install-and-setup-obsidian">Install and Setup Obsidian</h2>

<p><a href="https://obsidian.md/" class="web-link">Download Obisidian</a> on your PC.</p>

<p>Select Open a Folder as a Vault and select where you saved your exocore. Click <code class="language-plaintext highlighter-rouge">Trust authors and enable plugins</code>.</p>

<p>By default, changes are saved 10 minutes after no files have been edited to prevent publishing while you’re making corrections.</p>

<p>You can adjust this setting by clicking the gear icon in the bottom right, then scrolling down to the bottom of the sidebar and selecting <code class="language-plaintext highlighter-rouge">Obsidian Git</code>:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Vault backup interval (minutes)</code> - how frequently you want to changes to be saved automatically. Set to 10 minutes by default</li>
</ul>

<p>Also relevant if you plan to be editing on mobile is  <code class="language-plaintext highlighter-rouge">Auto pull interval (minutes)</code>, how frequently you want to sync with any changes to the exocore from another source. 10 minutes is reasonable, you can set this lower if you’re frequently moving back and forth from phone to PC. Make sure to set the Vault backup interval lower too if so.</p>

<p>Remember that you still control what is actually publicly published on the public site with the <code class="language-plaintext highlighter-rouge">published: true/false</code> tag at the top of each file.</p>

<h2 id="configuring-your-exocore">Configuring your Exocore</h2>

<ol>
  <li>Navigate to <code class="language-plaintext highlighter-rouge">/exocore/data/user.yml</code> to change your username.</li>
  <li>Navigate to <code class="language-plaintext highlighter-rouge">/_config.yml</code> to change the Title and URL of your exocore.</li>
  <li>Change the profile picture in the sidebar by replacing <code class="language-plaintext highlighter-rouge">assets/img/pfp.png</code> with a square profile picture of your choice.</li>
</ol>

<p>Each step explained in more detail with more personailzation options including changing themes at <a class="wiki-link" href="/articles/configure-exocore-for-personal-use">configure exocore for personal use</a>.</p>

<h2 id="optional-setup-mobile-editing">Optional: Setup Mobile Editing</h2>

<p>Obsidian has a good <a href="https://obsidian.md/mobile" class="web-link">mobile app</a> if you want to do mobile editing, but you’ll either need to store your Exocore on a cloud service such as iCloud or Google Drive to get the files on your phone, or pay $10/mon for <a href="https://obsidian.md/sync" class="web-link">Obsidian Sync</a>. The exocore is entirely text so it is very lightweight, the standard cloud drive 5-15GB free tiers all have more than enough to storage unless you’re hosting many PDFs or large files.</p>

<p>You’ll need to download their respective apps to point Obsidian to them on your local drive on both PC and mobile. For example, with Google Drive, you just download <a href="https://www.google.com/intl/en_in/drive/download/" class="web-link">Drive for Desktop</a> and <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.docs&amp;hl=en_US&amp;gl=US" class="web-link">Drive for Android</a> and login and your files will be accessible on the Obsidian apps.</p>

<p>Warning: For iOS, you will <em>need</em> to use iCloud storage, Apple doesn’t support other cloud storage solutions. If you’re familiar with git workflows, you can also <a href="https://forum.obsidian.md/t/mobile-setting-up-ios-git-based-syncing-with-mobile-app-using-working-copy/16499" class="web-link">sync with Git using Working Copy or iSH</a> as an alternative to iCloud.</p>

<h2 id="using-your-exocore">Using your Exocore</h2>

<p>Continue on to <a class="wiki-link" href="/articles/using-your-exocore">using your exocore</a> to familiarize yourself with the editor interface and begin writing new notes.</p>


            
            <br>
            <a href="/articles/exocore-installation-instructions"><strong>See more</strong></a>  
            
          </div>
          </div>
          
          <hr>
          <div class="backlinks-container">
            <side>
              <h1>Interlinked Pages</h1>
                  
                  
                  
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/exocore-executive-summary"><b>The Exocore Package</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/using-your-exocore"><b>Using your Exocore</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
            </side>
          </div>
          
  </article>  
  
  </main>

  
<br>

	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> Apr 16, 2022</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/underpinnings-of-the-exocore">
        <div class="title">
        <h1 class="title-text">Underpinnings of the Exocore</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <h2 id="digitally-integrated-mind-palace">Digitally-Integrated Mind Palace</h2>
<ul>
  <li>Navigability
    <ul>
      <li>Easy hyperlinking = frequent hyperlinking</li>
    </ul>
  </li>
  <li>Memorability
    <ul>
      <li>Hijacking and piggybacking on existing human mnemonic faculties
        <ul>
          <li><a class="wiki-link" href="/articles/underpinnings-of-the-exocore#chernoff-faces">Chernoff Faces</a></li>
          <li><a class="wiki-link" href="/articles/underpinnings-of-the-exocore#urbit-sigils">Urbit Sigils</a></li>
          <li><a class="wiki-link" href="/articles/underpinnings-of-the-exocore#urbit-names">Urbit Names</a></li>
          <li>Spatial faculties — does an implementation exist?</li>
        </ul>
      </li>
      <li>Zettelkasten mnemonic badges</li>
    </ul>
  </li>
</ul>

<h2 id="semantic-internet">Semantic Internet</h2>
<ul>
  <li>Plain text
    <ul>
      <li>Accessibility</li>
      <li>Universality</li>
    </ul>
  </li>
  <li>Standards-compliance</li>
  <li>Portability</li>
  <li>Static Website Delivery</li>
</ul>

<h2 id="writing-as-thinking-written-output-as-consolidated-thought">Writing as Thinking, Written Output as Consolidated Thought</h2>
<ul>
  <li>Feynman Technique</li>
  <li>General —&gt; specific, scattered -&gt; polished</li>
</ul>

<h2 id="data-ownership-and-escaping-net-serfdom">Data Ownership and Escaping Net Serfdom</h2>
<ul>
  <li>Digital owned space
    <ul>
      <li>Customisability</li>
      <li>Local Instance</li>
      <li>Digital and Personal Legacy</li>
    </ul>
  </li>
</ul>

<h2 id="foss">FOSS</h2>
<ul>
  <li>The Viral Public License</li>
  <li>Non-proprietary (open source) file formats</li>
</ul>

<h2 id="network-sublimation">Network Sublimation</h2>
<ul>
  <li>Collaboration</li>
  <li>Webrings</li>
  <li>RSS</li>
  <li>Remchat</li>
  <li>The New Internet</li>
</ul>

<h2 id="frictionlessness">Frictionlessness</h2>
<ul>
  <li>Local storage</li>
  <li>No internet required</li>
  <li>No coding required</li>
  <li>Searchability — in contention with static design</li>
</ul>

<h2 id="tradition-of-the-exocore">Tradition of the Exocore</h2>
<ul>
  <li>The Roman Room</li>
  <li>The Memex</li>
  <li>The Zettelkasten</li>
  <li>Project Xanadu</li>
  <li>Web 1.0</li>
  <li>IRC</li>
  <li>Webrings</li>
  <li>Digital Gardens</li>
</ul>

<h2 id="related-concepts-and-projects">Related Concepts and Projects:</h2>
<ul>
  <li>Project Xanadu</li>
  <li>Memex</li>
  <li>Compendium</li>
  <li>Zettelkasten</li>
  <li>Hyperdraft</li>
</ul>

<hr>

<h2 id="other-exocore-like-implementations-and-resources">Other Exocore-like implementations and resources</h2>

<ul>
  <li><a href="https://www.are.na/new-computer-working-group" class="web-link">New Computer Working Group — Are.na</a></li>
  <li><a href="https://wiki.xxiivv.com/site/about.html" class="web-link">XXIIVV — about</a></li>
  <li><a href="https://webring.xxiivv.com/" class="web-link">Webring</a></li>
  <li><a href="https://wiki.xxiivv.com/site/horaire.html" class="web-link">XXIIVV — horaire</a></li>
  <li><a href="https://urcad.es/writing/rfc001/" class="web-link">É. Urcades</a></li>
  <li><a href="https://github.com/learning-gardens/cybernetics-club/blob/master/minutes/session-1.md" class="web-link">cybernetics-club/session-1.md at master · learning-gardens/cybernetics-club · GitHub</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Lukasa_(Luba)" class="web-link">Lukasa (Luba) - Wikipedia</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Memex" class="web-link">wikipedia.org/wiki/Memex</a></li>
  <li><a href="https://v-os.ca/v-os" class="web-link">V · V-OS</a></li>
  <li><a href="http://augmentingcognition.com/ltm.html" class="web-link">Augmenting Long-term Memory</a></li>
  <li><a href="https://scholar.colorado.edu/concern/reports/t722h9830" class="web-link">Building the Memex Sixty Years Later: Trends and Directions in Personal Knowledge Bases</a></li>
  <li><a href="https://xvw.github.io/projects/planet.html" class="web-link">planet - Une collection d’outils pour construire ma page personnelle</a></li>
  <li><a href="https://rosano.hmm.garden/01etwe6d05s2c8m8fj53wh3s4w" class="web-link">Digital garden</a></li>
  <li><a href="https://rosano.hmm.garden/01etj3kw7w4zyz1f5ktnnagn7n" class="web-link">Hyperdraft</a></li>
  <li><a href="https://hraew.autophagy.io/" class="web-link">Hrǽw</a></li>
  <li><a href="https://github.com/learning-gardens/cybernetics-club/blob/master/resources.md" class="web-link">cybernetics-club/resources.md at master · learning-gardens/cybernetics-club · GitHub</a></li>
</ul>

<hr>

<h2 id="visual-data-representations-that-piggyback-on-human-mnemonic-faculties">Visual data representations that piggyback on human mnemonic faculties</h2>
<h3 id="chernoff-faces">Chernoff Faces</h3>
<p><img src="/images/chernoff-faces.png" alt=""></p>

<blockquote>
  <p>“Chernoff faces, invented by applied mathematician, statistician and physicist Herman Chernoff in 1973, display multivariate data in the shape of a human face. The individual parts, such as eyes, ears, mouth and nose represent values of the variables by their shape, size, placement and orientation.”</p>
</blockquote>

<h3 id="urbit-sigils">Urbit Sigils</h3>
<p><img src="/images/urbit-sigils.png" alt=""></p>

<h3 id="urbit-names">Urbit Names</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Prefixes   Suffixes
    ---------- ---------- 
0.    doz        zod
1.    mar        nec
2.    bin        bud
3.    wan        wes
4.    sam        sev
5.    lit        per
6.    sig        sut
7.    hid        let
8.    fid        ful
9.    lis        pen
10.   sog        syt
11.   dir        dur
12.   wac        wep
13.   sab        ser
14.   wis        wyl
15.   sib        sun
</code></pre></div></div>

<p><strong>Example:</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  8 bits  galaxy  ~lyt
 16 bits  star    ~diglyt
 32 bits  planet  ~picder-ragsyt
 64 bits  moon    ~diglyt-diglyt-picder-ragsyt
128 bits  comet   ~racmus-mollen-fallyt-linpex--watres-sibbur-modlux-rinmex
</code></pre></div></div>

<h3 id="roman-roommemory-palacemethod-of-loci">Roman Room/Memory Palace/Method of Loci</h3>

<p><img src="/images/roman-room.jpg" alt=""></p>

<h1 id="the-lukasa">The Lukasa</h1>

<p><img src="/images/lukasa.jpg" alt=""></p>
<blockquote>
  <p>“Court historians known as bana balute (“men of memory”) run their fingertips across the surface of a lukasa or point to its features while reciting genealogies, king lists, maps of protocol, migration stories, and the great Luba Epic, a preeminent oral narrative that records how the culture heroes, Mbidi Kiluwe and his son Kalala Ilunga, introduced royal political practices and etiquette. “</p>
</blockquote>


            
          </div>
          </div>
          
          <hr>
          <div class="backlinks-container">
            <side>
              <h1>Interlinked Pages</h1>
                  
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/underpinnings-of-the-exocore"><b>Underpinnings of the Exocore</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
            </side>
          </div>
          
  </article>  
  
  </main>

  
<br>

	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> Apr 16, 2022</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/set-up-a-custom-domain">
        <div class="title">
        <h1 class="title-text">Set up a Custom Domain</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <p>Custom domains can be added for a better look and more memorable url, but you will need to purchase one. If you already have a domain, follow the steps in <a href="#configuring-a-domain-purchased-elsewhere" class="web-link">Configuring a Domain Purchased Elsewhere</a></p>

<h2 id="purchase-domain-on-netlify">Purchase Domain on Netlify</h2>

<p>If you do not already have a domain, you can purchase it directly within Netlify by adding in a new Custom domain. Prices aren’t the best on the market (e.g. <code class="language-plaintext highlighter-rouge">.com</code> is $15/yr, market rate is $12/yr), but it will automate all setup.</p>

<ol>
  <li>Navigate to Settings &gt; Domain Management &gt; Add custom domain.</li>
  <li>Enter the domain you would like</li>
  <li>If it is unavailable, you will see <code class="language-plaintext highlighter-rouge">[domain] already has an owner. Is it you?</code>. Select <code class="language-plaintext highlighter-rouge">No, try another</code>.</li>
  <li>If you find one that is available, you will be provided prices and option to register. You can use a <a href="https://domains.google.com/registrar/search" class="web-link">Domain search tool</a> to help find available domains.</li>
</ol>

<p>Once you have a domain purchased, Netlify will automate handling DNS configuration and SSL encryption, so your site will be fully ready to go on your domain.</p>

<h2 id="purchasing-a-custom-domain">Purchasing a Custom Domain</h2>

<p>Domains can be purchased from a variety of suppliers for affordable rates - a <code class="language-plaintext highlighter-rouge">.com</code> domain goes for about $12/year, though uncommon domains like <code class="language-plaintext highlighter-rouge">.xyz</code> can be found for as low as $2/year.</p>

<p>I can recommend <a href="https://google.com/domains" class="web-link">Google Domains</a>, I use it because it includes privacy protection and custom email aliases for free, and has an easy to navigate dashboard, as well as Google’s very fast DNS.</p>

<p>For uncommon domains and more competitive prices, <a href="https://namecheap.com" class="web-link">Namecheap</a> is reliable - it also has a solid “Beast mode” search for finding rare domains.</p>

<h3 id="configuring-a-domain-purchased-elsewhere">Configuring a Domain Purchased Elsewhere</h3>

<p>If you purchase your domain elsewhere, you will need to configure your domain provider to point the domain to your Netlify site. Follow this guide: <a href="https://docs.netlify.com/domains-https/custom-domains/configure-external-dns/" class="web-link">Configure external DNS for a custom domain</a>.</p>

<p>The steps on your domain provider’s end will be different depending on your provider, look for something along the lines of “Create A or CNAME Record”, “Point DNS to Domain” or “Manage DNS Records”.</p>

<p>Then add the custom domain in Netlify:</p>
<ol>
  <li>Navigate to Settings &gt; Domain Management &gt; Add custom domain.</li>
  <li>Enter the domain you would like <code class="language-plaintext highlighter-rouge">[domain] already has an owner. Is it you?</code>. Select <code class="language-plaintext highlighter-rouge">No, try another</code>.</li>
  <li>If you find one that is available, you will see</li>
  <li>Select Yes, add domain</li>
</ol>

<p>SSL (https) will be configured automatically.</p>

            
          </div>
          </div>
          
  </article>  
  
  </main>

  
<br>

	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> Apr 13, 2022</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/using-your-exocore">
        <div class="title">
        <h1 class="title-text">Using your Exocore</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <p>Now that you’ve <a class="wiki-link" href="/articles/exocore-installation-instructions">installed your exocore</a> this guide will walk you through navigating it in practice. Read a more detailed explanation of the Exocore’s present and future functionality <a class="wiki-link" href="/articles/exocore-executive-summary">here.</a></p>

<h2 id="launch-your-exocore">Launch your Exocore</h2>

<p>Open the root folder of your Exocore in VS Code to launch your editing interface.</p>

<h3 id="creating-new-posts">Creating new posts</h3>

<p>Use keyboard command <code class="language-plaintext highlighter-rouge">Ctrl + P</code> (<code class="language-plaintext highlighter-rouge">Cmd + P</code> on OSX) to summon the command panel. From here you can access a variety of functions by beginning to type their names. Start typing ‘create new note from template’ to find the options for creating new posts.</p>

<ul>
  <li>
<strong>Daily Notes</strong> are designed as a quick access scratch pad, and are perfect for low-specificity research dumps and fleeting notes that will inform your notes in future. These are automatically titled by date. One is created each day automatically, and opened when you open VSCode.</li>
  <li>
<strong>Wiki Notes</strong> are designed for single atomic data points, and are automatically titled with a hexadecimal color code. This code is turned into a correspondingly colored badge in the index of the published site.</li>
  <li>
<strong>Journal Entries</strong> are for your thoughts, and are not automatically titled.</li>
  <li>
<strong>Articles</strong> are for longer write-ups on a particular topic.</li>
</ul>

<p>You may have noticed that these notes together create a pipeline for systematising knowledge over time from the general to the particular, and for capturing a bank of scattered reference material and developing it into a polished final product. You might choose to cite a research dump in the subsequent post that it turned into as a bibliography/further reading section, such as appears at the bottom of <a class="wiki-link" href="/scrapbook/predictive-processing-and-the-free-energy-principle">this wiki note</a>.</p>

<p>As you develop an idea, you may see it go through each stage of note until finally culminating in a well-researched article. Notes can even be embedded in full within other notes, explained in <a class="wiki-link" href="/articles/writing-with-exocore-syntax">writing with exocore syntax</a></p>

<h3 id="using-metadata">Using Metadata</h3>

<p>If you followed the above instructions to create a new post, you will notice that it spawned with a YAML metadata section at the top.</p>

<p>This metadata does not appear in the text of the post, but affects how the post will be treated when your Exocore is rendered into a website. The metadata of the post you are currently reading looks like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: article
category: article
subtitle:
topic: meta
date: 2022-04-13
tags: meta computers exocore
---
</code></pre></div></div>

<p>If you’re using a browser to read this, you won’t see this information at the top of the post, but the Exocore has incorporated it already into the way it treats the post. It has dated the post, sorted it into the ‘Articles’ section of the site, and given it tags which appear in the left sidebar. You can add to the topic and tags sections, backdate your post, or add a subtitle if you wish.</p>

<h3 id="preview-notes">Preview Notes</h3>

<p>Your notes can be previewed in rendered markdown by clicking the glass icon on the top right of the window. You can navigate between linked notes from within this previewed window.</p>

<p><img src="/images/2022-05-13-17-48-12.png" alt=""></p>

<h3 id="split-windows">Split Windows</h3>

<p>Obsidian: Ctrl+Click (OSX: CMD+Click) on a note can be used to create a new window split. Ctrl+W (OSX: CMD+W) can be used to close them.
VSCODE: Ctrl+\ (OSX: Cmd+) can be used to create a new window split. Ctrl+W (OSX: CMD+W) can be used to close them.</p>

<h3 id="graph-visualization">Graph Visualization</h3>
<p>See how your notes are connected via a graph by opening the command panel with ctrl+P (OSX: CMD+P) then entering <code class="language-plaintext highlighter-rouge">Graph view: Open graph view</code>(OBSIDIAN) / <code class="language-plaintext highlighter-rouge">Foam: Show Graph</code> (VSCODE). Notes can be clicked through to navigate your exocore this way.</p>

<p><img src="/images/2022-05-13-17-46-10.png" alt=""></p>

<h2 id="markdown-syntax">Markdown Syntax</h2>

<p>Continue on to <a class="wiki-link" href="/articles/writing-with-exocore-syntax">Writing with Exocore Syntax</a> to learn the Markdown syntax standards it follows, as well as its extensions for hyperlinks, embedded code, footnotes and more.</p>


            
          </div>
          </div>
          
          <hr>
          <div class="backlinks-container">
            <side>
              <h1>Interlinked Pages</h1>
                  
                  
                  
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/exocore-executive-summary"><b>The Exocore Package</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/configure-exocore-for-personal-use"><b>Configure Exocore for Personal Use</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
            </side>
          </div>
          
  </article>  
  
  </main>

  
<br>

	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> Feb 04, 2022</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/writing-with-exocore-syntax">
        <div class="title">
        <h1 class="title-text">Writing with Exocore Syntax</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <h2 id="markdown-basics">Markdown Basics</h2>

<p>The Exocore utilizes standardized Markdown syntax, along with some additional extensions. Much of the content of this article covers existing markdown syntax used universally in plain text formatting. However, some syntax, such as <a class="wiki-link" href="/articles/writing-with-exocore-syntax#examples-of-wikilinks">wikilinks</a> and <a class="wiki-link" href="/articles/writing-with-exocore-syntax#inserting-images">images</a> are particular to the Exocore.</p>

<ul>
  <li><a href="https://www.markdownguide.org/cheat-sheet/#basic-syntax" class="web-link">A Simple markdown cheat sheet </a></li>
  <li><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" class="web-link">A more comprehensive markdown cheat sheet</a></li>
</ul>

<h2 id="headers">Headers</h2>

<p>The above is a level 2 heading, preceded by <code class="language-plaintext highlighter-rouge">##</code> and a space.</p>

<p>There’s nothing special about the way the Exocore processes headers— it’s just standard markdown. However, each header will render with an anchor link. If you hover over a heading and click the link icon that appears, the URL in your browser will reflect the section that you clicked. Now, if you copy that URL it will link directly to the heading that you clicked.</p>

<h3 id="heading-levels">Heading levels</h3>

<p>The above is a level 3 heading, preceded by <code class="language-plaintext highlighter-rouge">###</code> and a space.</p>

<p>Here’s some advice: Only use top-level headings (preceded by <code class="language-plaintext highlighter-rouge">#</code>) for the document’s title. Aside from being markdown best practice, the Exocore takes your first top-level heading to use as the title of the page in the final rendered output. For intra-document section titles, use a level 2 heading. It’s for the best.</p>

<h2 id="examples-of-wikilinks">Examples of Wikilinks:</h2>

<p>Here is a basic wikilink, pointing to other posts on this Exocore: <code class="language-plaintext highlighter-rouge">&lt;a class="wiki-link" href="/articles/exocore-executive-summary"&gt;exocore executive summary&lt;/a&gt;</code> It renders like this: <a class="wiki-link" href="/articles/exocore-executive-summary">exocore executive summary</a>.</p>

<p>It is written as the title of their corresponding markdown file, surrounded by double square brackets. However, in the final render they are presented by default as the page’s title. This saves you typing out the whole page title in your markdown document, and allows the Foam VSCode extension to suggest files as you type. Below you can read about how to change their presentation.</p>

<p>You can alias a link like this: <code class="language-plaintext highlighter-rouge">&lt;a class="wiki-link" href="/journal/chinese-ginseng-chicken-tonic-soup"&gt;this link&lt;/a&gt;</code> if you don’t want to keep the title. Heads up— <code class="language-plaintext highlighter-rouge">&lt;a class="wiki-link" href="/journal/chinese-ginseng-chicken-tonic-soup"&gt;This link&lt;/a&gt;</code> points to a recipe for Chinese ginseng chicken Soup.</p>

<p>You can also point to headers within a page: <code class="language-plaintext highlighter-rouge">&lt;a class="wiki-link" href="/articles/writing-with-exocore-syntax#wikilink-embeds"&gt;This wikilink&lt;/a&gt;</code>. <a class="wiki-link" href="/articles/writing-with-exocore-syntax#wikilink-embeds">This wikilink</a> points to a header further down on this page, by using a <code class="language-plaintext highlighter-rouge">#</code>. Under that header you will find a different sort of wikilink— an embed. The content of another note is embedded within the current note. You can also point to a particular header within another note.</p>

<p>Check out the backlinks section at the bottom of any post, and you’ll find a list of every post that links back to it. Backlinks are automatically generated, and display all posts with links pointing to them.</p>

<h2 id="wikilink-embeds">Wikilink Embeds</h2>

<p>The below text is embedded, using the same wikilink syntax as normal, but with an <code class="language-plaintext highlighter-rouge">!</code> prepended. The full text of the linked note will be included. For example, here is an example of embedded note syntax:</p>

<div class="embed-wrapper">
<div class="embed-title">Jade Post</div>
<div class="embed-content">
<h1 id="jade-post">Jade post</h1>
<p>Cyber Asiatic Mystic Synthesis Return Eastern Technomarket Hegemon… Jade McDonalds Sun Poem… Pacific Ocean Disappear… (30 billion Eagles XxX 991hz) Platinum Prison Duplication Facility… Astral Screen-Cheating Marble Moon Wire Theft. Jade Dragon Million Sex Control Dollars Professional Power. Luxury Million Yen Diamond Power (Exit Enclave) POLICE STATE BATH HOUSE™ Holding Corporation. Yin Massage Hot Egg…</p>
</div>
<a class="embed-wiki-link" href="/journal/jade-post"></a>
</div>

<h2 id="external-hyperlinks">External Hyperlinks</h2>

<p>Hyperlinks to external sites are not the same as wikilinks. A wikilink is a simple way to hyperlink to other posts on your Exocore without using the full processed URL as it is rendered online. A wikilink works locally in VSCode, allowing you to navigate between posts, and is transformed at render time to a web hyperlink, so that it always points to the correct page.</p>

<div class="embed-wrapper">
<div class="embed-title">Configure exocore for personal use</div>
<div class="embed-content">
<h1 id="configure-exocore-for-personal-use">Configure Exocore for Personal Use</h1>
<h2 id="change-your-username-and-homepage">Change your Username and Homepage</h2>
<p>Navigate to <code class="language-plaintext highlighter-rouge">/exocore/data/user.yml</code>. Open the file in any text-editor (e.g. Notepad or TextEdit) and look for <code class="language-plaintext highlighter-rouge">user_name: Remilia Corporation</code>. Change this to whatever name you want to appear on the left sidebar.</p>
<h2 id="change-your-homepage-content">Change your Homepage Content</h2>
<p>In the same <code class="language-plaintext highlighter-rouge">/exocore/data/user.yml</code> file, you will also see <code class="language-plaintext highlighter-rouge">welcome_header</code> and <code class="language-plaintext highlighter-rouge">welcome_subtitle</code>. These control the title and subtitle that appear on your homepage.</p>
<p>On the root folder you will find <code class="language-plaintext highlighter-rouge">index.md</code>, this can be edited like any other article as your homepage with the addition of the title and header from the <code class="language-plaintext highlighter-rouge">user.yml</code> file. Make sure you keep the following frontmatter at the top of the markdown file:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---layout: hometitle: home---</code></pre></div></div>
<h2 id="change-your-profile-picture">Change your Profile Picture</h2>
<p>The profile picture that appears on the left sidebar is located at <code class="language-plaintext highlighter-rouge">assets/img/pfp.png</code>, you can replace this file with any .png. Note that it will be resized into a square.</p>
<h2 id="change-your-social-media-card-image">Change your Social Media Card Image</h2>
<p>The social media card that appears when your site is linked on social media sites like Twitter, Facebook, etc. is located at <code class="language-plaintext highlighter-rouge">assets/img/card.png</code>, you can replace this file with any .png. Note that a dimension of 1200x630 is recommended.</p>
<p>Make sure the site’s url is changed in <code class="language-plaintext highlighter-rouge">/_config.yml</code> in the next step for this image to appear.</p>
<h2 id="change-your-sites-title-and-url">Change your Site’s Title and URL</h2>
<p>Navigate to <code class="language-plaintext highlighter-rouge">/_config.yml</code> to change the Title and URL of your exocore. All other settings can be left as is.</p>
<h2 id="change-the-theme">Change the Theme</h2>
<p>The Exocore ships with multiple themes to choose from. Navigate to <code class="language-plaintext highlighter-rouge">/styles.scss</code> and look for the line that says <code class="language-plaintext highlighter-rouge">//Uncomment one of the following lines to choose a theme:</code>. To select a theme, remove <code class="language-plaintext highlighter-rouge">//</code> from the line of the theme you want to try, and add <code class="language-plaintext highlighter-rouge">//</code> to the previously active theme (“yotsuba” by default).</p>
<h2 id="optional-password-protection">Optional: Password Protection</h2>
<p>You can add simple password protection by going to your Netlify account, entering your site, going to <code class="language-plaintext highlighter-rouge">Settings &gt; Build &amp; Deploy &gt; Build Settings &gt; Edit Settings</code> and changing <code class="language-plaintext highlighter-rouge">Build commannd</code> from the default <code class="language-plaintext highlighter-rouge">bundle exec jekyll build</code> to: <code class="language-plaintext highlighter-rouge">jekyll build &amp;&amp; npx staticrypt _site/index.html P@SSW0RD -o _site/index.html</code></p>
<p>This will password protect the homepage with <code class="language-plaintext highlighter-rouge">P@SSWORD</code> as the password – you can change this to anything you’d like. Note that this will only protect the homepage, users will be able to directly link to any other page and have access to the whole site.</p>
<hr>
<p>Move on to [[Using your Exocore]] for further guidance.</p>
</div>
<a class="embed-wiki-link" href="/articles/configure-exocore-for-personal-use"></a>
</div>

<p>To create a hyperlink, use single normal parentheses around the URL you want to point to, and square brackets around the text you want displayed:</p>

<p><a href="https://en.wikipedia.org/wiki/Parenthesis" class="web-link">https://en.wikipedia.org/wiki/Parenthesis</a></p>

<p><code class="language-plaintext highlighter-rouge">[https://en.wikipedia.org/wiki/Parenthesis](https://en.wikipedia.org/wiki/Parenthesis)</code></p>

<p>You can alias a hyperlink by changing the text in the square brackets, like this:</p>

<p><a href="https://en.wikipedia.org/wiki/Hyperlink" class="web-link">Here’s some information about Hyperlinks.</a></p>

<p><code class="language-plaintext highlighter-rouge">[Here's some information about Hyperlinks.](https://en.wikipedia.org/wiki/Hyperlink)</code></p>

<h2 id="applying-classes-to-a-paragraph-or-image">Applying classes to a paragraph or image</h2>

<p class="right-aside"><strong>Oh, by the way:</strong> You can apply the <code class="language-plaintext highlighter-rouge">{:.right-aside}</code> class to create an aside, like this one. An aside floats to one side and other text wraps around it. <code class="language-plaintext highlighter-rouge">{:.left-aside}</code> is also available for some variety.</p>

<p>Kramdown, the Markdown parser used by this implementation of the Exocore, has the ability to apply a CSS class to a paragraph by including syntax like <code class="language-plaintext highlighter-rouge">{:.classname}</code> at the top or bottom of a paragraph. The class will be applied to the whole paragraph. The Exocore stylesheet includes a few general classes meant to be used for just this purpose, which you should feel free to add to.</p>

<p><strong>The following classes are pre-defined in the Exocore stylesheet:</strong></p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">{:.center}</code> — <em>Reduces width of paragraph and centers it for emphasis</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">{:.left-aside}</code>, <code class="language-plaintext highlighter-rouge">{:.right-aside}</code> — <em>Applies a border and floats to the left/right. Other text will wrap around it</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">{:.left}</code>, <code class="language-plaintext highlighter-rouge">{:.right}</code> - <em>Reduces width and places to the left/right (meant for images)</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">{:.border}</code> - <em>applies a thin border</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">{:.shadow}</code> - <em>applies a dark blurred drop shadow</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">{:.glow}</code> - <em>applies a bright blurred drop shadow (produces a glowing effect)</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">{:.flip}</code> - <em>flips the image (or text) horizontally</em></p>
  </li>
</ul>

<h2 id="tables">Tables</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>| You can           | create a          | simple table      | like this.     |
| ----------------- | ----------------- | ----------------- | -------------- |
| A new line        | in markdown       | extends the table | vertically.    |
| A pipe            | extends the table | laterally.        |                |
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>You can</th>
      <th>create a</th>
      <th>simple table</th>
      <th>like this.</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A new line</td>
      <td>in markdown</td>
      <td>extends the table</td>
      <td>vertically.</td>
    </tr>
    <tr>
      <td>A pipe</td>
      <td>extends the table</td>
      <td>laterally.</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>For more options, check out the ‘advanced tables’ plugin in the sidebar. This plugin will assist you with spacing and syntax, and includes a powerful formula function, about which you can find information <a href="https://github.com/tgrosinger/md-advanced-tables/blob/main/docs/formulas.md" class="web-link">here</a>.</p>

<h2 id="graphviz">Graphviz</h2>

<p>For more complex data representation, <a href="https://graphviz.org/" class="web-link">Graphviz</a> can be used in conjunction with the Exocore. Read more about Graphviz syntax <a href="https://graphviz.org/documentation/" class="web-link">here</a>, and find a demonstration of the way it is used with the Exocore <a class="wiki-link" href="/journal/exocore-workflow">here</a>.</p>

<h2 id="sidenotes-and-footnotes">Sidenotes and Footnotes:</h2>

<p>Footnotes are done with <code class="language-plaintext highlighter-rouge">[^1]</code>, and look like this: <sup id="fnref:1"><a href="#fn:1" class="footnote web-link" rel="footnote" role="doc-noteref">1</a></sup> Each footnote is an anchor link to the bottom of the page, with a return link attached. Notice the sidenote in the right margin, identical to the footnote.</p>

<p>All footnotes are also rendered as sidenotes. A footnote forms a commentary or citation best kept separate from the main text, and a sidenote is an easy way for a reader to access such commentary without breaking ergonomy by jumping up and down the page.</p>

<p>If you want to add multi-paragraph footnotes, indent your second paragraph, like this (see footnote at bottom).<sup id="fnref:2"><a href="#fn:2" class="footnote web-link" rel="footnote" role="doc-noteref">2</a></sup></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[^2]: For longer footnotes, you may want to use multiple paragraphs.

    Indent paragraphs to include them in the footnote.
</code></pre></div></div>

<p>You can put a footnote’s markdown reference immediately under a paragraph, like this<sup id="fnref:3"><a href="#fn:3" class="footnote web-link" rel="footnote" role="doc-noteref">3</a></sup>, or clump them at the end. Either way, they will appear at the bottom in your rendered content.</p>

<p><code class="language-plaintext highlighter-rouge">[^3]: This footnote appears immediately underneath its referring paragraph in this document's original markdown, but on the rendered website it shows at the bottom. </code></p>

<p>Footnotes automatically form a numbered list, and can also be mapped by name, like this: <code class="language-plaintext highlighter-rouge">[^named-footnote]</code><sup id="fnref:named-footnote"><a href="#fn:named-footnote" class="footnote web-link" rel="footnote" role="doc-noteref">4</a></sup></p>

<h2 id="inserting-images">Inserting images</h2>

<p>To insert an image, use the following syntax:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>![](/images/mouse.jpg)
</code></pre></div></div>

<p>However, <strong>don’t bother remembering this syntax.</strong> the easiest way to insert an image is to use the Paste Image VSCode extension, included in Obsidian by default, which you will be prompted to download as a recommended third-party extension of the Foam VSCode extension. For MacOS, copy your image to the clipboard, and use keyboard command <code class="language-plaintext highlighter-rouge">CMD + option + V</code>. You will be prompted to give your image file a name, and add it to the images folder in your Exocore’s top-level directory. <strong>Note:</strong> If you CMD+C copy an image from your desktop on a mac, it is not copied to your clipboard. Instead, open the image, and then use the same keyboard command.</p>

<p>You can insert alt text and a caption like this:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>![This is alt text](/images/mouse.jpg)
*Insert a caption by placing italicised text immediately underneath the image*
</code></pre></div></div>
<p>The above snippet produces the below outcome:</p>

<p><img src="/images/mouse.jpg" alt="This is alt text">
<em>Insert a caption by placing italicised text immediately underneath the image, with no empty line in between.</em></p>

<h2 id="embedded-code">Embedded Code</h2>
<p>To embed a piece of code so that characters are rendered verbatim, surround the code snippet with ``` on either side, like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/bin/zsh
cd ~/desktop/james-liao &amp;&amp; bundle exec jekyll serve --baseurl ''
</code></pre></div></div>

<p>Use just one ` to embed code in the same line as the rest of your text.</p>

<h2 id="naming-files">Naming files</h2>

<p>Don’t use whitespace in your filenames— instead, name-them-like-this. This way, titles are easily converted to URLs and the back end of the Exocore remains happy. This of course applies only to filenames, and you may title your posts how you wish.</p>

<hr>

<p>That should be everything to get you started!</p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1">
      <p>This is the first footnote. Note the return button: <a href="#fnref:1" class="reversefootnote web-link" role="doc-backlink">↲</a></p>
    </li>
    <li id="fn:2">
      <p>For longer footnotes, you may want to use multiple paragraphs.</p>

      <p>Indent paragraphs to include them in the footnote. <a href="#fnref:2" class="reversefootnote web-link" role="doc-backlink">↲</a></p>
    </li>
    <li id="fn:3">
      <p>This footnote appears immediately underneath its referring paragraph in this document’s original markdown, but on the rendered website it shows at the bottom. <a href="#fnref:3" class="reversefootnote web-link" role="doc-backlink">↲</a></p>
    </li>
    <li id="fn:named-footnote">
      <p>This footnote has the name ‘named-footnote’. it’s still numbered and appears in sequence the same way the others do, but naming it might help you manage a document with many footnotes when dealing with your local markdown. <a href="#fnref:named-footnote" class="reversefootnote web-link" role="doc-backlink">↲</a></p>
    </li>
  </ol>
</div>

            
            <br>
            <a href="/articles/writing-with-exocore-syntax"><strong>See more</strong></a>  
            
          </div>
          </div>
          
          <hr>
          <div class="backlinks-container">
            <side>
              <h1>Interlinked Pages</h1>
                  
                  
                  
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/exocore-executive-summary"><b>The Exocore Package</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/writing-with-exocore-syntax"><b>Writing with Exocore Syntax</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/using-your-exocore"><b>Using your Exocore</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/exocore-installation-instructions"><b>Exocore Installation Instructions</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
            </side>
          </div>
          
  </article>  
  
  </main>

  
<br>

	

    <main>
      <article class="latest-post-border">
        <div style="padding: 0.5em 0.5em 0em 0.5em">
             
          <div class="post-date"><strong>Created:</strong> Jan 27, 2021</div>
          <div class="post-date"><strong>Modified:</strong> May 26, 2025</div>
        </div>
        <a href="/articles/exocore-executive-summary">
        <div class="title">
        <h1 class="title-text">The Exocore Package</h1> 
        </div>
      </a>
          
        <div class="notes-entry-container note">
          <div class="content post-content">
            <p><a href="/articles/installation-instructions/" class="web-link"><img src="/images/exocore.png" alt=""></a></p>

<h2 id="executive-summary">Executive Summary</h2>

<p>The exocore is a preconfigured package to roll out your own no-code, no-cost personal website as a public exocortex from documents written in simple Markdown syntax, including interlinking, generated backlinks and a nodal graph-rendering. Site’s are rendered in fast, responsive, standards-compliant static HTML.</p>

<p>The exocore is developed by <a href="https://remilia.org" class="web-link">Remilia Corporation</a> as a <a href="https://jamstack.org/" class="web-link">Jamstack</a> worfklow and extension of <a href="https://github.com/foambubble/foam" class="web-link">Foam</a> to complete the system of an accessible and standardized autopublishing knowledgebase network, as a proof-of-concept for <a href="https://mirror.xyz/charlemagnefang.eth/831rVsd2Z7cjxnBAw118gW8MylKibfC2AeJ6YUHiAvA" class="web-link">Remilia’s New Internet</a>.</p>

<h2 id="installation-instructions">Installation Instructions</h2>
<p>Follow the <a class="wiki-link" href="/articles/exocore-installation-instructions">no code instructions</a> to install your exocore and set up automatic publishing with Netlify. Time required: ~30 minutes.</p>

<h2 id="detailed-introduction">Detailed Introduction</h2>

<p>Do you take notes, or conduct personal research? Do you output or collect text or image content in any form, such as a blog, poetry, diary or visual art? Do you intake any form of media, and want to catalogue your findings or thoughts? Do you forget information? The Exocore is a means to store and organize and publish such a bank of information in an easily navigable form.</p>

<p>The exocore comprises a set of a few programs and plugins, rolling them into a package which can be customized infinitely and modularly; without any technical knowledge it can still be made your own, and with even a touch of technical knowledge (particularly CSS or HTML facility) it can be made into anything at all.</p>

<p>Its online component is a scaffolding for a website, and its offline component (fully functional without the online) is a filing system for notes, written output, or other data. Out of the box, it’s a local directory of folders and interacting files forming an empty template for a <a href="https://zettelkasten.de/introduction/" class="web-link">zettelkasten</a>/personal wiki, a platform for longform articles, a library of documents, a gallery of images, and an automatically created daily diary. Mix and match these features as you wish; they are fully modular and independent. A user would be free to use or not use any of these features, so if they want to create a self-hosted platform like Substack with no extra features, this is facilitated.</p>

<p>In the future, these exocores can comprise a webring linked by automatically updated network pages, as well as a IRC network for which the Exocore will operate as user’s personal homepages. They can also feature things like an automatically updated ‘latest posts’ feed from all other (or selected) Exocores, or just ‘related posts’ (by <a href="https://jekyllrb.com/docs/front-matter/" class="web-link">metadata</a> tags) from your own site.</p>

<h1 id="breaking-down-the-exocore">Breaking down the Exocore</h1>

<p><img src="/images/study-monk.jpg" alt="study-monk"></p>

<h2 id="information-pipeline">Information Pipeline</h2>

<p>Notes are segregated into 4 categories:</p>
<ul>
  <li>
<strong>Daily Notes</strong>, designed as a quick access scratch pad, and are perfect for low-specificity research dumps and fleeting notes that will inform your notes in future. These are automatically titled by date. One is created each day automatically, and opened when you open VSCode.</li>
  <li>
<strong>Wiki Notes</strong>, designed for single atomic data points, and are automatically titled with a hexadecimal color code. This code is turned into a correspondingly colored badge in the index of the published site.</li>
  <li>
<strong>Journal Entries</strong>, for your thoughts, and are not automatically titled.</li>
  <li>
<strong>Articles</strong>, for longer write-ups on a particular topic.</li>
</ul>

<p>These note categories together create a pipeline for systematising knowledge over time from the general to the particular, and for capturing a bank of scattered reference material and developing it into a polished final product. For example, you might choose to cite a research dump in the subsequent post that it turned into as a bibliography/further reading section. This workflow is designed to encourage active, daily use of the exocore for all thoughts.</p>

<h2 id="editing-environment">Editing Environment</h2>

<p>The exocore is built as an extension on top of the Foam Visual Studio Code package, which is itself an open-source recreation of the Roam learning garden editor. Foam  introduces the standard features required for a proper personal wiki system such as:</p>
<ul>
  <li>Backlinks panel</li>
  <li>Wikilinks aliasing syntax</li>
  <li>Tiling windows</li>
  <li>Note embedding</li>
  <li>Graph visualization</li>
  <li>Sync files on rename</li>
</ul>

<p>This system provides a powerful and highly customizable dashboard for comprehensive note-taking. On top of Foam, we’ve introduced:</p>
<ul>
  <li>Segregated note categories with default templates</li>
  <li>Daily note generation</li>
  <li>Automatic randomly generated titling for zettelkasten functionality</li>
  <li>Automatic table of contents generation</li>
  <li>Footnotes and sidenotes</li>
  <li>Suite of Jekyll templates for automatically publishing websites off the collection of notes</li>
</ul>

<h3 id="user-experience">User experience:</h3>

<p>A user download the package in the form of a Github repository template, which lives on their local machine as a directory that can be manually or automatically synced via <a href="https://git-scm.com" class="web-link">git</a> to a web domain, which represents the documents in the directory after they are processed into an eaily-navigable and feature-rich website. Their exocore can be published to the web at no-cost using Netlify’s free hosting and subdomain service.</p>

<p>A user can get by just fine only interacting with simple plaintext <a href="https://www.markdownguide.org" class="web-link">markdown</a> files, and can write posts and create hyperlinks between them, add pictures or PDFs and more, without going beyond in-text markdown syntax (read more about the Exocore’s syntax <a class="wiki-link" href="/articles/writing-with-exocore-syntax">here</a>). They are also able to control how their generated website handles their documents in a human-readable <a class="wiki-link" href="/articles/using-your-exocore#using-metadata">metadata section</a> at the top of each post: tags, title, subtitle, categories, layouts, date, and any others that the user cares to add.</p>

<p><img src="/images/girl-online.png" alt="" class="right-aside"></p>

<p>Locally, the directory of notes (which will also be a git repository if you wish to publish as a website online) is managed and maintained through a <a href="https://code.visualstudio.com" class="web-link">VS Code</a> workspace.</p>

<p>The recommended extensions for your workspace arrives as a package of two things:</p>

<ol>
  <li>
    <p>A template directory including templates for simple creation of new markdown documents of different kinds (article, journal entry, wiki note, daily note), each treated differently in the rendering of your website.</p>
  </li>
  <li>
    <p>A set of VSCode plugins which offer a suite of features for the user to add to their directory of posts by facilitating easy linking between notes, URL management, and many other features. The directory can be easily hosted for free with <a href="https://www.netlify.com" class="web-link">Netlify</a>, for which a setup guide is available <span class="invalid-wiki-link">[<a href="Exocore%20Installation%20Instructions" title="Exocore Installation Instructions" class="web-link">Exocore Installation Instructions#1. Deploy your own Exocore to the Web|here</a>]</span>.</p>
  </li>
</ol>

<h3 id="jekyll">Jekyll</h3>

<p>To view your site before it is pushed online, a user can also set up their Exocore directory to build a local instance of the site with <a href="https://jekyllrb.com" class="web-link">Jekyll</a>. When publishing, Netlify runs Jekyll server-side, so running it locally produces the same site as will be published.</p>

<h3 id="customizability">Customizability</h3>

<p>The stack is an open-source repo and a suite of open-source programs and plugins, and is therefore ultimately customizable. The level of customizability depends only on your technical know-how, but minimal learnings yield compounding rewards. Here is an idea of the level of control over your final website yielded by advancing levels of technical knowledge:</p>

<ul>
  <li>
<strong>No technical knowledge:</strong>
    <ul>
      <li>
        <p>You can implement all of the above, and choose from a set of .CSS templates for your website to adjust its aesthetics. You can create posts, use the daily note functionality, store documents in the Library, create ZK notes and links between them, use backlinking, embed notes, and all other features mentioned above. In other words, all features are fully available with no technical knowledge. You should become acquainted with the Exocore’s <a class="wiki-link" href="/articles/writing-with-exocore-syntax">writing with exocore syntax</a>, but this is easy enough to guess at, or to learn in under half an hour.</p>

        <p>For publishing, a very cursory knowledge of git will come in handy, but git has a helpful GUI, and Exocore <a class="wiki-link" href="/articles/exocore-installation-instructions#create-github-account">documentation</a> includes a guide on how to publish your site.</p>
      </li>
    </ul>
  </li>
  <li>
<strong>HTML and CSS</strong>
    <ul>
      <li>You will be able to edit included stylesheets and HTML templates to create a site which looks any way that you wish. Both these languages are simple to learn, and even without learning them comprehensively a user can edit the provided templates and stylesheets to make major changes.</li>
    </ul>
  </li>
  <li>
<strong>Jekyll/Liquid</strong>
    <ul>
      <li>You will be able to create logic functions to manipulate metadata stored in the markdown front matter, create custom menus or boxes with automatically generated content based on the front matter, assign your own custom front matter variables, and more.</li>
    </ul>
  </li>
  <li>
<strong>Ruby</strong>
    <ul>
      <li>Learning Ruby is not at all necessary, but familiarity with it will facilitate you in packaging themes you have created for your exocore as Ruby Gems in case you would like to publish them for use by others. If you want to proliferate your particular model of the exocore, this is an easy way to package it.</li>
    </ul>
  </li>
</ul>

<h2 id="full-tech-stack">Full Tech Stack</h2>

<ul>
  <li>
<a href="https://obsidian.md" class="web-link">Obsidian</a> / <a href="https://code.visualstudio.com" class="web-link">VS Code</a> (and plugin package)</li>
  <li>
<a href="https://git-scm.com" class="web-link">Git</a> (for syncing)</li>
  <li>
<a href="https://jekyllrb.com" class="web-link">Jekyll</a> (for publishing)</li>
</ul>

<p><strong>Obsidian Plugins:</strong></p>
<ul>
  <li>Backlinks</li>
  <li>Daily Notes</li>
  <li>Templates</li>
  <li><a href="https://github.com/denolehov/obsidian-git" class="web-link">Obsidian Git</a></li>
  <li><a href="https://github.com/SilentVoid13/Templater" class="web-link">Templater</a></li>
  <li><a href="https://github.com/dvcrn/obsidian-filename-heading-sync" class="web-link">Filename Heading Sync</a></li>
</ul>

<p><strong>VSCode Plugins:</strong></p>
<ul>
  <li><a href="https://marketplace.visualstudio.com/items?itemName=foam.foam-vscode" class="web-link">Foam</a></li>
  <li><a href="https://marketplace.visualstudio.com/items?itemName=shailen.netlify" class="web-link">Netlify</a></li>
  <li><a href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one" class="web-link">Markdown All in One</a></li>
  <li><a href="https://marketplace.visualstudio.com/items?itemName=mushan.vscode-paste-image" class="web-link">Paste Image</a></li>
  <li><a href="https://marketplace.visualstudio.com/items?itemName=ban.spellright" class="web-link">Spell Right</a></li>
</ul>


            
            <br>
            <a href="/articles/exocore-executive-summary"><strong>See more</strong></a>  
            
          </div>
          </div>
          
          <hr>
          <div class="backlinks-container">
            <side>
              <h1>Interlinked Pages</h1>
                  
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/writing-with-exocore-syntax"><b>Writing with Exocore Syntax</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/using-your-exocore"><b>Using your Exocore</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
                  
                  
                  <div class="backlink-box">
                    <a href="/articles/exocore-installation-instructions"><b>Exocore Installation Instructions</b>
                      <br>
                      Articles
                    </a>
                  </div>
                
                
            </side>
          </div>
          
  </article>  
  
  </main>

  
<br>



<div class="license">
    <div>
    <a class="internal-link" href="https://viralpubliclicense.org">
      VIRAL PUBLIC LICENSE<br>
      Copyleft (ɔ) All Rights Reversed</a>
    </div>
  <br>
  <br>
  <subfooter>
    <a href="#"><strong>↑ Return ↑</strong></a>
  </subfooter>
</div>

</div>
</div>

<script type="text/javascript">
  // Hack: Replace page-link with "Page Title"
  document.querySelectorAll(".markdown-body a[title]").forEach((a) => {
    a.innerText = a.title;
  });
  // Hack: Remove .md extension from wikilinks to get the html in jekyll
  document.querySelectorAll("a").forEach(l => {
    if (l.href.endsWith('.md')) {
      l.href = l.href.substring(0, l.href.length-3)
    }
  })
</script>


<script type="text/javascript">
  // Hack: Replace page-link with "Page Title"
  document.querySelectorAll(".markdown-body a[title]").forEach((a) => {
    a.innerText = a.title;
  });
  // Hack: Remove .md extension from wikilinks to get the html in jekyll
  document.querySelectorAll("a").forEach(l => {
    if (l.href.endsWith('.md')) {
      l.href = l.href.substring(0, l.href.length-3)
    }
  })

   // Hack: Remove .md extension from wikilinks to get the html in jekyll
   document.querySelectorAll("a").forEach(l => {
    if (l.href.endsWith('.md')) {
      l.href = l.href.substring(0, l.href.length-3)
    }
  })
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add('.post-content h2, h3, h4, h5, h6');</script>

    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$', '$'] ],
      displayMath: [ ['$$', '$$']],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    messageStyle: "none",
    "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
  });
  </script>
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
  

  <script type="text/javascript">
    //hack: remove <p> tags from images in tables 
       document.querySelectorAll("td").forEach(t => {
    if (t.textContent.endsWith("</p>")) {
      // t.textContent = t.textContent.substring(0, t.textContent.length-3)
      
      // note to self: make this work by setting text color to td background color
      // if textContent begins with / ends with escaped p element 

    }
  })
  </script>


  </body>
</html>